{"version":3,"sources":["webpack:///webpack/bootstrap 5497f298bec660b070be","webpack:///./src/virtualkeyboard.js","webpack:///./src/extensions/helpers.js","webpack:///./src/extensions/ext/array.js","webpack:///./src/extensions/ext/object.js","webpack:///./src/extensions/ext/regexp.js","webpack:///./src/extensions/ext/string.js","webpack:///./src/extensions/documentselection.js","webpack:///./src/extensions/dom.js","webpack:///./src/extensions/eventmanager.js","webpack:///./src/ime.js","webpack:///./src/extensions/DOMEventsLevel3.shim.js"],"names":["VirtualKeyboard","self","$VERSION$","options","idPrefix","animate","controlKeys","KEY","keymap","keymaps","mode","VK_NORMAL","VK_SHIFT","VK_ALT","VK_CTRL","VK_CAPS","VK_CTRL_CAPS","VK_CTRL_SHIFT","VK_ALT_CAPS","VK_ALT_CTRL","VK_ALT_CTRL_CAPS","VK_ALT_SHIFT","VK_SHIFT_ALT_CTRL","VK_SHIFT_CAPS","VK_ALL","cssClasses","lang","layout","hash","codes","codeFilter","nodes","keyboard","desk","langbox","attachedInput","newKeyCode","addLayoutList","i","aL","arguments","length","addLayout","l","code","entityDecode","split","name","alpha","__doParse","normal","Error","domain","hasOwnProperty","toString","push","switchLayout","__buildOptionsList","IME","hide","selected","__prepareLayout","html","__getKeyboardHtml","innerHTML","className","css","__updateLayout","activate","__toggleInputDir","getLayouts","lts","lL","sort","setVisibleLayoutCodes","filter","cL","toUpperCase","value","getLayoutCodes","heapSort","_keyClicker_","key","evt","chr","ret","replace","CAPS","SHIFT","ALT","charProcessor","getSelection","deleteAtCursor","el","document","getElementById","__charProcessor","charCodeAt","contentDocument","ck","createEvent","KeyboardEvent","char","bubbles","cancelable","VK_bypass","addOneTimeEventListener","e","insertAtCursor","setRange","dispatchEvent","inputEvt","Event","composed","keyCode","console","error","_keydownHandler_","isOpen","newMode","getKeyCode","type","prevPage","nextPage","childNodes","getRepeat","CSS","addClass","buttonDown","id","preventDefault","start","getStart","shiftKey","ctrlKey","altKey","srcElement","removeClass","stopPropagation","__updateControlKeys","_btnClick_","getParent","target","parentNode","indexOf","substring","hasClass","_btnMousedown_","_btnMouseInOut_","mtd","__toggleControlKeysState","CTRL","__toggleKeyState","toLowerCase","switchMapping","attachInput","detachInput","tagName","noanim","contentWindow","body","addEventListener","blurHandler","oe","removeEventListener","getAttachedInput","open","show","input","holder","kpTarget","nodeType","appendChild","close","removeChild","toggle","reset","rtl","dir","s","o","n","cc","sL","z","label","createElement","createTextNode","match","map","a","String","fromCharCodeExt","join","shift","alt","shift_alt","caps","shift_caps","dk","cbk","cs","ca","csa","csc","ics","ica","icsa","icc","icsc","lt","char_normal","char_alt","char_caps","char_shift","parseInt","fromCharCode","modeNormal","modeShift","modeAlt","modeShiftAlt","modeCaps","modeShiftCaps","modeShiftAltCaps","changes","state","prefix","s1","s2","getClass","hoverShift","hoverAlt","buttonHover","suffix","tchr","buf","res","dks","idx","charAt","inp","style","position","left","btns","title","buttonUp","__getCharHtmlForKey","charNormal","charShift","charAlt","charShiftAlt","charCaps","charShiftCaps","splice","lyt","deadkey","hiddenCaps","hiddenShift","hiddenShiftCaps","hiddenAlt","_initialized","init","opts","log","_opts","unselectable","showKeyboardLayouts","showKeyboardMaps","firstChild","item","nextSibling","mapGroup","c","tk","kL","lastChild","preventDefaultAction","onmousedown","Langs","$","fn","virtkeys","jqObj","_open","_close","_toggle","_getLayoutCodes","_switchLayout","addLayouts","_addLayouts","getLoadedLayouts","_getLoadedLayouts","addIMELanguages","_addIMELanguages","get","layouts","_layouts","langs","undefined","_langs","jQuery","isUndefined","prop","isFunction","isString","isNumber","isNumeric","isNaN","isFinite","isArray","Array","isRegExp","RegExp","isBoolean","isScalar","isEmpty","Boolean","gluePath","findPath","sname","h","getElementsByTagName","sr","m","b","href","location","getScriptQuery","parseQuery","q","qL","rs","kv","rkv","unescape","table2array","ci","section","subsection","DOM","hasTagName","rows","span","ts","ce","rL","tr","cells","innerText","normalize","nodeValue","trim","tL","cd","createElementExt","tag","p","L","k","setAttribute","attachEvent","playInterval","f","setInterval","apply","call","playTimeout","setTimeout","cloneObject","obj","newObject","constructor","oL","mergeObject","oi","concat","unique","slice","loadStyleSheet","sn","hasStyleSheet","head","link","rel","path","test","prototype","copy","tmp","flatten","cols","binSearch","r","len","Math","max","ceil","cnt","sift","arr","low","up","maximal","range","end","inc","mn","min","mx","abs","reverse","Object","escape","text","sRE","specials","ltrim","rtrim","dup","val","valueOf","repeat","padding","pad","padLeft","padRight","sprintf","args","index","frmt","re","x","sign","ins","Number","bin","substr","round","dec","toExponential","toFixed","hex","DocumentSelection","keys","callMethod","arg","module","keepScroll","ot","ol","window","getSelectionOffset","y","scrollTop","clientHeight","scrollLeft","clientWidth","related","st","getEnd","getCursorPosition","keep","pos","wrapSelection","after","deleteSelection","getContext","offsetCalculator","getPos","r1","r2","r3","r4","r5","selectionStart","selectionEnd","setActive","selection","createRange","moveStart","moveEnd","createTextRange","moveToElementText","sTest","del","opera","setSelectionRange","collapse","select","doc","getWindow","prevCalcNode","defaultView","getComputedStyle","overflow","visibility","zIndex","top","backgroundColor","width","whiteSpace","getAttribute","border","offsetLeft","offsetTop","offsetHeight","boundingHeight","xy","getOffset","getBodyScrollTop","getBodyScrollLeft","s3","sel","anchorNode","so","anchorOffset","en","focusNode","eo","focusOffset","ss","es","sc","ec","cn","tw","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","rangeCount","getRangeAt","deleteContents","insertNode","addRange","ln","selectNodeContents","pn","replaceChild","extractContents","setStart","setStartAfter","removeAllRanges","cl","setEnd","move","off","contents","cloneContents","endOffset","borderLeft","surroundContents","offsetParent","selectNode","cp","vl","fixBrowserQuirks","height","originalObject","considerScroll","nodeName","clientLeft","clientTop","offsetWidth","getClientWidth","win","w","innerWidth","documentElement","getOffsetWidth","outerWidth","getClientHeight","innerHeight","getOffsetHeight","outerHeight","pageYOffset","pageXOffset","ownerDocument","parentWindow","pageX","pageY","de","clientX","clientY","tags","t","color2rgb","d","ov","vLink","err","setOpacity","opacity","KhtmOpacity","MozOpacity","cache","getClassValue","vals","currentStyle","EM","pool","UID","rootEventHandler","unifyEvent","hid","fe","currentTarget","UEID","handler","hL","message","unloadEventHandler","pid","node","rootEHCaller","detachEvent","EU","cur","cur1","getUEID","et","oneTimeEventHandler","eid","registerEvent","EventTarget","__construct","stopPropagationAction","bubble","def","canBubble","defaultAction","trigger","data","undef","returnValue","cancelBubble","button","ac","executed","clearEvents","handlers","ie","mz","event","propertyName","navigator","userAgent","version","argumentsCalleeFixFn","readyState","ime","chars","page","showAll","sg","targetWindow","__createImeToolbar","setSuggestions","display","updatePosition","co","showPage","getSuggestions","getPage","getChar","toggleShowAll","sa","pL","els","eL","pasteSuggestion","arrl","arrr","arrd","__GCC__ECMA_SCRIPT_SHIMS__","__GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__","global","__e__","_DOM_KEY_LOCATION_STANDARD","_DOM_KEY_LOCATION_LEFT","_DOM_KEY_LOCATION_RIGHT","_DOM_KEY_LOCATION_NUMPAD","_DOM_KEY_LOCATION_MOBILE","_DOM_KEY_LOCATION_JOYSTICK","_Event_prototype","_KeyboardEvent_prototype","_Event_prototype__native_key_getter","_Event_prototype__native_char_getter","_Event_prototype__native_location_getter","_Event_prototype__native_keyCode_getter","_Object_defineProperty","defineProperty","__defineGetter__","__defineSetter__","_Object_getOwnPropertyDescriptor","getOwnPropertyDescriptor","getObjectPropertyGetter","__lookupGetter__","KEYBOARD_EVENTS","UUID","_event_handleUUID","_event_eventsUUID","_shim_event_keyCodeUUID","_keyboardEvent_properties_dictionary","_Event_has_stopImmediatePropagation","_Array_slice","_unSafeBind","Function","bind","object","var_args","__method","_hasOwnProperty","_try_initKeyboardEvent","_getter_KeyboardEvent_location","_initKeyboardEvent_type","_createEvent","initKeyboardEvent","canOverwrite_keyCode","canOverwrite_which","testKeyboardEvent","newKeyboadrEvent_key_property_proposal__getKey_","__Property_descriptor__","VK__NON_CHARACTER_KEYS","_key","_char","_location","VK__CHARACTER_KEYS__DOWN_UP","_userAgent_","_IS_MAC","platform","_BROWSER","__i","IS_NEED_KEYCODE_BUGFIX","IS_OPERA_DOUBBLE_KEYPRESS_BUG","_KEYPRESS_VK__CHARACTER_KEYS__DOWN_UP_DELTA","_keyCode","_version","VK__FAILED_KEYIDENTIFIER","_KeyboardEvent","dict","localDict","_prop_name","_prop_value","_ctrlKey","_shiftKey","_altKey","_metaKey","_altGraphKey","modifiersListArg","_bubbles","_cancelable","_repeat","_locale","success_init","initKeyEvent","initEvent","writable","isTrusted","which","newValue","originalKey","eventKeyCode","vkCharacterKey","value_is_object","_helper_isRight_keyIdentifier","_keyIdentifier","thisObj","notKeyPress","metaKey","_keyDownHandler","_this","listener","_","vkNonCharacter","_listener","handleEvent","keyLocation","_keyDown_via_keyPress_Handler","_charCode","_event","need__stopImmediatePropagation__and__preventDefault","__key","stopImmediatePropagation","forEach","prototypeToFix","old_addEventListener","old_removeEventListener","useCapture","_eventsUUID","_event_UUID","_events_countUUID","vkCharacter","vkCharacter_key"],"mappings":"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","file":"virtkeys.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5497f298bec660b070be","import { isUndefined, isFunction, isString, isNumber, isNumeric, isArray, isRegExp, isBoolean, isScalar, \r\n    isEmpty, mergeObject } from './extensions/helpers';\r\nimport './extensions/ext/array';\r\nimport './extensions/ext/object';\r\nimport './extensions/ext/regexp';\r\nimport './extensions/ext/string';\r\n\r\n\r\nimport { DocumentSelection } from './extensions/documentselection';\r\nimport { DOM } from './extensions/dom';\r\nimport { EM } from './extensions/eventmanager';\r\n\r\nimport { IME } from './ime';\r\nimport './extensions/DOMEventsLevel3.shim';\r\n\r\n\r\nconst VirtualKeyboard = new function () {\r\n    var self = this;\r\n    self.$VERSION$ = \"3.6.1.585\";\r\n\r\n    \r\n    var options = {\r\n        'layout': null,\r\n        'showKeyboardMaps': true,\r\n        'showKeyboardLayouts': true\r\n    }\r\n    \r\n    var idPrefix = 'kb_b';\r\n    \r\n    var animate = true;\r\n    \r\n    var controlKeys = {\r\n        14: 'backspace'\r\n        , 15: 'tab'\r\n        , 28: 'enter'\r\n        , 29: 'caps'\r\n        , 41: 'shift_left'\r\n        , 52: 'shift_right'\r\n        , 53: 'del'\r\n        , 54: 'ctrl_left'\r\n        , 55: 'alt_left'\r\n        , 56: 'space'\r\n        , 57: 'alt_right'\r\n        , 58: 'ctrl_right'\r\n    };\r\n    \r\n    var KEY = {\r\n        'SHIFT': 'shift'\r\n        , 'ALT': 'alt'\r\n        , 'CTRL': 'ctrl'\r\n        , 'CAPS': 'caps'\r\n    }\r\n    \r\n    var keymap;\r\n\r\n    \r\n    var keymaps = {\r\n        'QWERTY Standard': \"À1234567890m=ÜQWERTYUIOPÛÝASDFGHJKL;ÞZXCVBNM¼¾¿\"\r\n        , 'QWERTY Canadian': \"Þ1234567890m=ÜQWERTYUIOPÛÝASDFGHJKL;ÀZXCVBNM¼¾¿\"\r\n        , 'QWERTY Dutch': \"Þ1234567890Û¿ÜQWERTYUIOPÝ;ASDFGHJKL=ÀZXCVBNM¼¾m\"\r\n        , 'QWERTY Estonian': \"¿1234567890m=ÜQWERTYUIOPÞÛASDFGHJKL;ÀZXCVBNM¼¾Ý\"\r\n        , 'QWERTY Greek (220)': \"À1234567890¿ÛÜQWERTYUIOP=ÝASDFGHJKL;ÞZXCVBNM¼¾m\"\r\n        , 'QWERTY Greek (319)': \"À1234567890¿=ÜQWERTYUIOPÛÝASDFGHJKL;ÞZXCVBNM¼¾m\"\r\n        , 'QWERTY Gujarati': \"À1234567890m=XQWERTYUIOPÛÝASDFGHJKL;ÜZXCVBNM¼¾¿\"\r\n        , 'QWERTY Italian': \"Ü1234567890ÛÝ¿QWERTYUIOP;=ASDFGHJKLÀÞZXCVBNM¼¾m\"\r\n        , 'QWERTY Kannada': \"À1234567890m=ZQWERTYUIOPÛÝASDFGHJKL;ÞZXCVBNM¼¾¿\"\r\n        , 'QWERTY Portuguese': \"À1234567890ÛÝ¿QWERTYUIOP=;ASDFGHJKLÞÜZXCVBNM¼¾m\"\r\n        , 'QWERTY Scandinavian': \"Ü1234567890=Û¿QWERTYUIOPÝ;ASDFGHJKLÀÞZXCVBNM¼¾m\"\r\n        , 'QWERTY Spanish': \"Ü1234567890mÛ¿QWERTYUIOPÝ;ASDFGHJKLÀÞZXCVBNM¼¾ß\"\r\n        , 'QWERTY Tamil': \"À1234567890m =ZQWERTYUIOPÛÝASDFGHJKL;ÞCVBNM¼¾ ¿\"\r\n        , 'QWERTY Turkish': \"À1234567890ßm¼QWERTYUIOPÛÝASDFGHJKL;ÞZXCVBNM¿Ü¾\"\r\n        , 'QWERTY UK': \"ß1234567890m=ÞQWERTYUIOPÛÝASDFGHJKL;ÀZXCVBNM¼¾¿\"\r\n        , 'QWERTZ Albanian': \"À1234567890m=ÜQWERTZUIOPÛÝASDFGHJKL;ÞYXCVBNM¼¾¿\"\r\n        , 'QWERTZ Bosnian': \"À1234567890¿=ÜQWERTZUIOPÛÝASDFGHJKL;ÞYXCVBNM¼¾m\"\r\n        , 'QWERTZ Czech': \"À1234567890=¿ÜQWERTZUIOPÛÝASDFGHJKL;ÞYXCVBNM¼¾m\"\r\n        , 'QWERTZ German': \"Ü1234567890ÛÝ¿QWERTZUIOP;=ASDFGHJKLÀÞYXCVBNM¼¾m\"\r\n        , 'QWERTZ Hungarian': \"0123456789À¿=ÜQWERTZUIOPÛÝASDFGHJKL;ÞYXCVBNM¼¾m\"\r\n        , 'QWERTZ Slovak': \"À1234567890¿ßÜQWERTZUIOPÛÝASDFGHJKL;ÞYXCVBNM¼¾m\"\r\n        , 'QWERTZ Swiss': \"Ü1234567890ÛÝßQWERTZUIOP;ÞASDFGHJKLÀ¿YXCVBNM¼¾m\"\r\n        , 'AZERTY Belgian': \"Þ1234567890ÛmÜAZERTYUIOPÝ;QSDFGHJKLMÀWXCVBN¼¾¿=\"\r\n        , 'AZERTY French': \"Þ1234567890Û=ÜAZERTYUIOPÝ;QSDFGHJKLMÀWXCVBN¼¾¿ß\"\r\n        , ',WERTY Bulgarian': \"À1234567890m¾Ü¼WERTYUIOPÛÝASDFGHJKL;ÞZXCVBNMßQ¿\"\r\n        , 'QGJRMV Latvian': \"À1234567890mFÜQGJRMVNZWXYH;USILDATECÞÛBÝKPOß¼¾¿\"\r\n        , '/,.PYF UK-Dvorak': \"m1234567890ÛÝÜÀ¼¾PYFGCRL¿=AOEUIDHTNSÞ;QJKXBMWVZ\"\r\n        , 'FG;IOD Turkish F': \"À1234567890=mXFG;IODRNHPQWUÛEAÝTKMLYÞJÜVC¿ZSB¾¼\"\r\n        , ';QBYUR US-Dvorak': \"7ÛÝ¿PFMLJ4321Ü;QBYURSO¾65=mKCDTHEAZ8ÞÀXGVWNI¼09\"\r\n        , '56Q.OR US-Dvorak': \"m1234JLMFP¿ÛÝÜ56Q¾ORSUYB;=78ZAEHTDCKÞ90X¼INWVGÀ\"\r\n    }\r\n    \r\n    var mode = 0\r\n        , VK_NORMAL = 0\r\n        , VK_SHIFT = 1\r\n        , VK_ALT = 2\r\n        , VK_CTRL = 4\r\n        , VK_CAPS = 8\r\n        , VK_CTRL_CAPS = VK_CTRL | VK_CAPS\r\n        , VK_CTRL_SHIFT = VK_CTRL | VK_SHIFT\r\n        , VK_ALT_CAPS = VK_ALT | VK_CAPS\r\n        , VK_ALT_CTRL = VK_ALT | VK_CTRL\r\n        , VK_ALT_CTRL_CAPS = VK_ALT | VK_CTRL | VK_CAPS\r\n        , VK_ALT_SHIFT = VK_ALT | VK_SHIFT\r\n        , VK_SHIFT_ALT_CTRL = VK_SHIFT | VK_ALT | VK_CTRL\r\n        , VK_SHIFT_CAPS = VK_SHIFT | VK_CAPS\r\n        , VK_ALL = VK_SHIFT | VK_ALT | VK_CTRL | VK_CAPS;\r\n    \r\n    var cssClasses = {\r\n        'buttonUp': 'kbButton'\r\n        , 'buttonDown': 'kbButtonDown'\r\n        , 'buttonHover': 'kbButtonHover'\r\n        , 'hoverShift': 'hoverShift'\r\n        , 'hoverAlt': 'hoverAlt'\r\n        , 'modeAlt': 'modeAlt'\r\n        , 'modeAltCaps': 'modeAltCaps'\r\n        , 'modeCaps': 'modeCaps'\r\n        , 'modeNormal': 'modeNormal'\r\n        , 'modeShift': 'modeShift'\r\n        , 'modeShiftAlt': 'modeShiftAlt'\r\n        , 'modeShiftAltCaps': 'modeShiftAltCaps'\r\n        , 'modeShiftCaps': 'modeShiftCaps'\r\n        , 'charNormal': 'charNormal'\r\n        , 'charShift': 'charShift'\r\n        , 'charAlt': 'charAlt'\r\n        , 'charShiftAlt': 'charShiftAlt'\r\n        , 'charCaps': 'charCaps'\r\n        , 'charShiftCaps': 'charShiftCaps'\r\n        , 'hiddenAlt': 'hiddenAlt'\r\n        , 'hiddenCaps': 'hiddenCaps'\r\n        , 'hiddenShift': 'hiddenShift'\r\n        , 'hiddenShiftCaps': 'hiddenShiftCaps'\r\n        , 'deadkey': 'deadKey'\r\n        , 'noanim': 'VK_no_animate'\r\n\r\n    }\r\n    \r\n    var lang = null;\r\n    \r\n    var layout = []\r\n    \r\n    layout.hash = {};\r\n    \r\n    layout.codes = {};\r\n    \r\n    layout.codeFilter = null;\r\n    \r\n    layout.options = null;\r\n\r\n    \r\n    var nodes = {\r\n        keyboard: null    \r\n        , desk: null        \r\n        , langbox: null     \r\n        , attachedInput: null// Field, keyboard attached to\r\n    }\r\n    \r\n    var newKeyCode = null;\r\n\r\n    \r\n    \r\n    self.addLayoutList = function () {\r\n        for (var i = 0, aL = arguments.length; i < aL; i++) {\r\n            self.addLayout(arguments[i]);\r\n        }\r\n    }\r\n\r\n    \r\n    self.addLayout = function (l) {\r\n\r\n        var code = l.code.entityDecode().split(\"-\")\r\n            , name = l.name.entityDecode()\r\n            , alpha = __doParse(l.normal)\r\n\r\n        if (!isArray(alpha) || 47 != alpha.length) throw new Error('VirtualKeyboard requires \\'keys\\' property to be an array with 47 items, ' + alpha.length + ' detected. Layout code: ' + code + ', layout name: ' + name);\r\n\r\n        \r\n        l.code = (code[1] || code[0]);\r\n        l.name = name;\r\n        l.normal = alpha;\r\n        l.domain = code[0];\r\n\r\n        \r\n        if (layout.hash.hasOwnProperty(l.code + \" \" + l.name))\r\n            return;\r\n\r\n        \r\n        if (!layout.codes.hasOwnProperty(l.code))\r\n            layout.codes[l.code] = l.code;\r\n\r\n        \r\n        l.toString = function () { return this.code + \" \" + this.name };\r\n\r\n        layout.push(l);\r\n\r\n        \r\n        layout.options = null;\r\n    }\r\n    \r\n    self.switchLayout = function (code) {\r\n        \r\n        __buildOptionsList();\r\n\r\n        if (!layout.options.hasOwnProperty(code)) return false;\r\n\r\n        \r\n        self.IME.hide();\r\n\r\n        \r\n        nodes.langbox.options[layout.options[code]].selected = true;\r\n\r\n        lang = layout[layout.hash[code]];\r\n        if (!isArray(lang)) lang = layout[layout.hash[code]] = __prepareLayout(lang);\r\n\r\n        if (!isArray(lang)) {\r\n            lang = layout[layout.hash[code]] = __prepareLayout(lang);\r\n        }\r\n        if (!lang.html) {\r\n            lang.html = __getKeyboardHtml(lang);\r\n        }\r\n        \r\n        nodes.desk.innerHTML = lang.html;\r\n\r\n        \r\n        nodes.keyboard.className = lang.domain\r\n        self.IME.css = lang.domain\r\n\r\n        \r\n        mode = VK_NORMAL;\r\n        __updateLayout();\r\n        \r\n        if (isFunction(lang.activate)) {\r\n            lang.activate();\r\n        }\r\n        \r\n        __toggleInputDir();\r\n        \r\n       \r\n       \r\n        return true;\r\n    }\r\n\r\n    \r\n    self.getLayouts = function () {\r\n        var lts = [];\r\n        for (var i = 0, lL = layout.length; i < lL; i++) {\r\n            lts[lts.length] = [layout[i].code, layout[i].name];\r\n        }\r\n        return lts.sort();\r\n    }\r\n    \r\n    self.setVisibleLayoutCodes = function () {\r\n        var codes = isArray(arguments[0]) ? arguments[0] : arguments\r\n            , filter = null\r\n            , code\r\n\r\n        for (var i = 0, cL = codes.length; i < cL; i++) {\r\n            code = codes[i].toUpperCase();\r\n            if (!layout.codes.hasOwnProperty(code))\r\n                continue;\r\n            if (!filter)\r\n                filter = {}\r\n            filter[code] = code;\r\n        }\r\n        layout.codeFilter = filter;\r\n\r\n        \r\n        layout.options = null;\r\n\r\n        if (!self.switchLayout(nodes.langbox.value)) {\r\n            \r\n            self.switchLayout(nodes.langbox.value);\r\n        }\r\n    }\r\n    \r\n    self.getLayoutCodes = function () {\r\n        var codes = [];\r\n        for (var i in layout.codes) {\r\n            if (!layout.codes.hasOwnProperty(i))\r\n                continue;\r\n            codes.push(i);\r\n        }\r\n        return codes.heapSort();\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n   \r\n    var _keyClicker_ = function (key, evt) {\r\n        var chr = \"\"\r\n            , ret = false;\r\n        key = key.replace(idPrefix, \"\");\r\n        switch (key) {\r\n            case KEY.CAPS:\r\n            case KEY.SHIFT:\r\n            case \"shift_left\":\r\n            case \"shift_right\":\r\n            case KEY.ALT:\r\n            case \"alt_left\":\r\n            case \"alt_right\":\r\n                return true;\r\n            case 'backspace':\r\n                \r\n                if (isFunction(lang.charProcessor) && DocumentSelection.getSelection(nodes.attachedInput).length) {\r\n                    chr = \"\\x08\";\r\n                } else if (evt) {\r\n                    self.IME.hide(true);\r\n                    return true;\r\n                } else {\r\n                    DocumentSelection.deleteAtCursor(nodes.attachedInput, false);\r\n                    self.IME.hide(true);\r\n                }\r\n                break;\r\n            case 'del':\r\n                self.IME.hide(true);\r\n                if (evt)\r\n                    return true;\r\n                DocumentSelection.deleteAtCursor(nodes.attachedInput, true);\r\n                break;\r\n            case 'space':\r\n                chr = \" \";\r\n                break;\r\n            case 'tab':\r\n                chr = \"\\t\";\r\n                break;\r\n            case 'enter':\r\n                chr = \"\\n\";\r\n                break;\r\n            default:\r\n                var el = document.getElementById(idPrefix + key);\r\n                chr = lang[key][mode];\r\n                break;\r\n        }\r\n        if (chr) {\r\n            \r\n            if (!(chr = __charProcessor(chr, DocumentSelection.getSelection(nodes.attachedInput)))) return ret;\r\n            \r\n            try {\r\n                \r\n                if (chr[1] || chr[0].length > 1 || chr[0].charCodeAt(0) > 0x7fff || nodes.attachedInput.contentDocument || '\\t' == chr[0]) {\r\n                    throw new Error;\r\n                }\r\n                var ck = chr[0].charCodeAt(0);\r\n                \r\n                if (isFunction(document.createEvent)) {\r\n                    var evt = new KeyboardEvent('keypress', { key: key, char: chr[0], bubbles: true, cancelable: true });\r\n                    evt.VK_bypass = true;\r\n\r\n                    \r\n                    EM.addOneTimeEventListener(nodes.attachedInput, 'keypress', function(e) {\r\n                        DocumentSelection.insertAtCursor(nodes.attachedInput, chr[0]);\r\n                        \r\n                        if (chr[1]) {\r\n                            DocumentSelection.setRange(nodes.attachedInput, -chr[1], 0, true);\r\n                        }\r\n                    });\r\n\r\n                    \r\n                    nodes.attachedInput.dispatchEvent(evt);\r\n\r\n                    \r\n                    var inputEvt = new Event('input', { bubbles: true, cancelable: false, composed: false });\r\n                    nodes.attachedInput.dispatchEvent(inputEvt);\r\n                } else {\r\n                    evt.keyCode = 10 == ck ? 13 : ck;\r\n                    ret = true;\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    \r\n    var _keydownHandler_ = function (e) {\r\n        \r\n        if (!self.isOpen()) return;\r\n        \r\n        var newMode = mode;\r\n        \r\n        var keyCode = e.getKeyCode();\r\n        switch (e.type) {\r\n            case 'keydown':\r\n                switch (keyCode) {\r\n                    case 37:\r\n                        if (self.IME.isOpen()) {\r\n                            self.IME.prevPage(e);\r\n                            return;\r\n                        }\r\n                        break;\r\n                    case 39:\r\n                        if (self.IME.isOpen()) {\r\n                            self.IME.nextPage(e);\r\n                            return;\r\n                        }\r\n                        break;\r\n                    case 8:\r\n                    case 9:\r\n                    case 46:\r\n                        var el = nodes.desk.childNodes[keymap[keyCode]];\r\n                        \r\n                        if (animate && !e.getRepeat()) DOM.CSS(el).addClass(cssClasses.buttonDown);\r\n                        if (!_keyClicker_(el.id, e)) e.preventDefault();\r\n\r\n                        break;\r\n                    case 20:\r\n                        if (!e.getRepeat()) {\r\n                            newMode = newMode ^ VK_CAPS;\r\n                        }\r\n                        break;\r\n                    case 27:\r\n                        if (self.IME.isOpen()) {\r\n                            self.IME.hide();\r\n                        } else {\r\n                            var start = DocumentSelection.getStart(nodes.attachedInput);\r\n                            DocumentSelection.setRange(nodes.attachedInput, start, start);\r\n                        }\r\n                        return false;\r\n                    default:\r\n                        if (!e.getRepeat()) {\r\n                            newMode = newMode | e.shiftKey | e.ctrlKey << 2 | e.altKey << 1;\r\n                        }\r\n                        if (keymap.hasOwnProperty(keyCode)) {\r\n                            if (!(e.altKey ^ e.ctrlKey)) {\r\n                                var el = nodes.desk.childNodes[keymap[keyCode]];\r\n                                if (animate) DOM.CSS(el).addClass(cssClasses.buttonDown);\r\n                                \r\n                                newKeyCode = el.id;\r\n                            }\r\n                            if (e.altKey && e.ctrlKey) {\r\n                                e.preventDefault();\r\n                                \r\n                                if (e.srcElement) {\r\n                                    _keyClicker_(nodes.desk.childNodes[keymap[keyCode]].id, e)\r\n                                    newKeyCode = \"\";\r\n                                }\r\n                            }\r\n                        } else {\r\n                            self.IME.hide();\r\n                        }\r\n                        break;\r\n                }\r\n                break;\r\n            case 'keyup':\r\n                switch (keyCode) {\r\n                    case 20:\r\n                        break;\r\n                    default:\r\n                        if (!e.getRepeat()) {\r\n                            newMode = mode & (VK_ALL ^ (!e.shiftKey | (!e.ctrlKey << 2) | (!e.altKey << 1)));\r\n                        }\r\n                        if (animate && keymap.hasOwnProperty(keyCode)) {\r\n                            DOM.CSS(nodes.desk.childNodes[keymap[keyCode]]).removeClass(cssClasses.buttonDown);\r\n                        }\r\n                }\r\n                break;\r\n            case 'keypress':\r\n                \r\n                if (newKeyCode && !e.VK_bypass) {\r\n                    if (!_keyClicker_(newKeyCode, e)) {\r\n                        e.stopPropagation();\r\n                        \r\n                        e.preventDefault();\r\n                    }\r\n                    \r\n                    newKeyCode = null;\r\n                }\r\n                if (!mode ^ VK_ALT_CTRL && (e.altKey || e.ctrlKey)) {\r\n                    self.IME.hide();\r\n                }\r\n                if (0 == keyCode && !newKeyCode && !e.VK_bypass \r\n                    && (!e.ctrlKey && !e.altKey && !e.shiftKey) \r\n                ) {\r\n                    e.preventDefault();\r\n                }\r\n        }\r\n        \r\n        if (newMode != mode) {\r\n            __updateControlKeys(newMode);\r\n            __updateLayout();\r\n        }\r\n    }\r\n    \r\n    var _btnClick_ = function (e) {\r\n        \r\n        var el = DOM.getParent(e.srcElement || e.target, 'a');\r\n        \r\n        if (!el || el.parentNode.id.indexOf(idPrefix) < 0) return;\r\n        el = el.parentNode;\r\n\r\n        switch (el.id.substring(idPrefix.length)) {\r\n            case \"caps\":\r\n            case \"shift_left\":\r\n            case \"shift_right\":\r\n            case \"alt_left\":\r\n            case \"alt_right\":\r\n            case \"ctrl_left\":\r\n            case \"ctrl_right\":\r\n                return;\r\n        }\r\n\r\n        if (DOM.CSS(el).hasClass(cssClasses.buttonDown) || !animate) {\r\n            _keyClicker_(el.id);\r\n        }\r\n        if (animate) {\r\n            DOM.CSS(el).removeClass(cssClasses.buttonDown)\r\n        }\r\n\r\n        var newMode = mode & (VK_CAPS | e.shiftKey | e.altKey << 1 | e.ctrlKey << 2);\r\n        if (mode != newMode) {\r\n            __updateControlKeys(newMode);\r\n            __updateLayout();\r\n        }\r\n\r\n    }\r\n    \r\n    var _btnMousedown_ = function (e) {\r\n        \r\n        var el = DOM.getParent(e.srcElement || e.target, 'a');\r\n        \r\n        if (!el || el.parentNode.id.indexOf(idPrefix) < 0) return;\r\n        el = el.parentNode;\r\n\r\n        var newMode = mode;\r\n\r\n        var key = el.id.substring(idPrefix.length);\r\n        switch (key) {\r\n            case \"caps\":\r\n                newMode = newMode ^ VK_CAPS;\r\n                break;\r\n            case \"shift_left\":\r\n            case \"shift_right\":\r\n                \r\n                if (e.shiftKey) break;\r\n                newMode = newMode ^ VK_SHIFT;\r\n                break;\r\n            case \"alt_left\":\r\n            case \"alt_right\":\r\n            case \"ctrl_left\":\r\n            case \"ctrl_right\":\r\n                newMode = newMode ^ (e.altKey << 1 ^ VK_ALT) ^ (e.ctrlKey << 2 ^ VK_CTRL);\r\n                break;\r\n            \r\n            default:\r\n                if (animate) DOM.CSS(el).addClass(cssClasses.buttonDown)\r\n                break;\r\n        }\r\n\r\n        if (mode != newMode) {\r\n            __updateControlKeys(newMode);\r\n            __updateLayout();\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n    \r\n    var _btnMouseInOut_ = function (e) {\r\n        \r\n        var el = DOM.getParent(e.srcElement || e.target, 'a')\r\n            , mtd = { 'mouseover': 2, 'mouseout': 3 }\r\n        \r\n        if (!el || el.parentNode.id.indexOf(idPrefix) < 0) return;\r\n        el = el.parentNode;\r\n\r\n        \r\n        if (el.id.indexOf('shift') > -1) {\r\n            \r\n            __toggleControlKeysState(mtd[e.type], KEY.SHIFT);\r\n        } else if (el.id.indexOf('alt') > -1 || el.id.indexOf('ctrl') > -1) {\r\n            \r\n            __toggleControlKeysState(mtd[e.type], KEY.CTRL);\r\n            __toggleControlKeysState(mtd[e.type], KEY.ALT);\r\n        } else if (el.id.indexOf('caps') > -1) {\r\n            __toggleKeyState(mtd[e.type], null, el.id);\r\n        } else if (animate) {\r\n            __toggleKeyState(mtd[e.type], null, el.id);\r\n            if ('mouseout' == e.type.toLowerCase()) {\r\n                \r\n                __toggleKeyState(0, null, el.id);\r\n            }\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    \r\n    var switchMapping = function (e) {\r\n       \r\n        keymap = keymaps[e.target.value];\r\n    }\r\n    \r\n    \r\n    self.attachInput = function (el) {\r\n        \r\n        if (!el) return nodes.attachedInput;\r\n        if (isString(el)) el = document.getElementById(el);\r\n\r\n        if (el == nodes.attachedInput) return nodes.attachedInput;\r\n\r\n        \r\n        if (!self.switchLayout(options.layout) && !self.switchLayout(nodes.langbox.value)) {\r\n            \r\n            throw new Error('No layouts available');\r\n        }\r\n\r\n        \r\n        self.detachInput();\r\n\r\n        if (!el || !el.tagName) {\r\n            nodes.attachedInput = null;\r\n        } else {\r\n\r\n            \r\n            animate = !DOM.CSS(el).hasClass(cssClasses.noanim);\r\n            \r\n            nodes.attachedInput = el;\r\n            \r\n            __toggleInputDir();\r\n            if (el.contentWindow) {\r\n                el = el.contentWindow.document.body.parentNode;\r\n            }\r\n            EM.addEventListener(el, 'keydown', _keydownHandler_);\r\n            EM.addEventListener(el, 'keyup', _keydownHandler_);\r\n            EM.addEventListener(el, 'keypress', _keydownHandler_);\r\n            EM.addEventListener(el, 'mousedown', self.IME.blurHandler);\r\n        }\r\n        return nodes.attachedInput;\r\n    }\r\n\r\n    \r\n    self.detachInput = function () {\r\n        if (!nodes.attachedInput) return false;\r\n        \r\n        __toggleInputDir(true);\r\n        \r\n        self.IME.hide();\r\n        \r\n        if (nodes.attachedInput) {\r\n            var oe = nodes.attachedInput\r\n            if (oe.contentWindow) {\r\n                oe = oe.contentWindow.document.body.parentNode\r\n            }\r\n            EM.removeEventListener(oe, 'keydown', _keydownHandler_);\r\n            EM.removeEventListener(oe, 'keypress', _keydownHandler_);\r\n            EM.removeEventListener(oe, 'keyup', _keydownHandler_);\r\n            EM.removeEventListener(oe, 'mousedown', self.IME.blurHandler);\r\n        }\r\n        nodes.attachedInput = null;\r\n        return true;\r\n    }\r\n\r\n    \r\n    self.getAttachedInput = function (el) {\r\n        return nodes.attachedInput;\r\n    }\r\n    \r\n    self.open =\r\n        self.show = function (input, holder, kpTarget) {\r\n            if (!(input = self.attachInput(nodes.attachedInput || input)) || !nodes.keyboard || !document.body) return false;\r\n\r\n            \r\n            if (!nodes.keyboard.parentNode || nodes.keyboard.parentNode.nodeType == 11) {\r\n                if (isString(holder)) holder = document.getElementById(holder);\r\n                if (!holder.appendChild) return false;\r\n                holder.appendChild(nodes.keyboard);\r\n                \r\n                if (!isUndefined(kpTarget) && input != kpTarget && kpTarget.appendChild) {\r\n                    EM.addEventListener(kpTarget, 'keydown', _keydownHandler_);\r\n                    EM.addEventListener(kpTarget, 'keyup', _keydownHandler_);\r\n                    EM.addEventListener(kpTarget, 'keypress', _keydownHandler_);\r\n                }\r\n            }\r\n\r\n            return true;\r\n        }\r\n    \r\n    self.close =\r\n        self.hide = function () {\r\n            if (!nodes.keyboard || !self.isOpen()) return false;\r\n            self.detachInput();\r\n            nodes.keyboard.parentNode.removeChild(nodes.keyboard);\r\n            return true;\r\n        }\r\n    \r\n    self.toggle = function (input, holder, kpTarget) {\r\n        self.isOpen() ? self.close() : self.show(input, holder, kpTarget);\r\n    }\r\n    \r\n    self.isOpen = function ()  {\r\n        return (!!nodes.keyboard.parentNode) && nodes.keyboard.parentNode.nodeType == 1;\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n    var __toggleInputDir = function (reset) {\r\n        if (nodes.attachedInput) {\r\n            var mode = reset ? \"\"\r\n                : (lang.rtl ? 'rtl'\r\n                    : 'ltr');\r\n            if (nodes.attachedInput.contentWindow)\r\n                nodes.attachedInput.contentWindow.document.body.dir = mode;\r\n            else\r\n                nodes.attachedInput.dir = mode;\r\n        }\r\n    }\r\n\r\n    \r\n    var __buildOptionsList = function () {\r\n        if (null != layout.options)\r\n            return;\r\n\r\n        var s = layout.heapSort()\r\n            , l, o, n\r\n            , cc = {};\r\n        layout.options = {};\r\n\r\n        nodes.langbox.innerHTML = \"\";\r\n        for (var i = 0, sL = s.length, z = 0; i < sL; i++) {\r\n            l = layout[i];\r\n            n = l.code + \" \" + l.name;\r\n            layout.hash[n] = i;\r\n\r\n            if (layout.codeFilter && !layout.codeFilter.hasOwnProperty(l.code))\r\n                continue;\r\n\r\n            if (cc.label != l.code) {\r\n                cc = document.createElement('optgroup');\r\n                cc.label = l.code;\r\n                nodes.langbox.appendChild(cc);\r\n            }\r\n            o = document.createElement('option');\r\n            o.value = n;\r\n            o.appendChild(document.createTextNode(l.name));\r\n            o.label = l.name;\r\n            cc.appendChild(o);\r\n            \r\n            layout.options[n] = z++;\r\n        }\r\n    }\r\n    \r\n    var __doParse = function (s) {\r\n        if (isString(s))\r\n            return s.match(/\\x01.+?\\x01|[\\ud800-\\udbff][\\udc00-\\udfff]|./g).map(function (a) { return a.replace(/[\\x01\\x02]/g, \"\") });\r\n        else\r\n            return s.map(function (a) { return isArray(a) ? a.map(function (s) { String.fromCharCodeExt(s) }).join(\"\") : String.fromCharCodeExt(a).replace(/[\\x01\\x02]/g, \"\") });\r\n    }\r\n    \r\n    var __prepareLayout = function (l) {\r\n        \r\n        var alpha = l.normal\r\n            , shift = l.shift || {}\r\n            , alt = l.alt || {}\r\n            , shift_alt = l.shift_alt || {}\r\n            , caps = l.caps || {}\r\n            , shift_caps = l.shift_caps || {}\r\n            , dk = l.dk\r\n            , cbk = l.cbk\r\n            , cs, ca, csa, cc, csc = null\r\n            , ics, ica, icsa, icc, icsc = -1\r\n            , lt = []\r\n\r\n        lt.name = l.name;\r\n        lt.code = l.code;\r\n        lt.toString = l.toString;\r\n\r\n        for (var i = 0, aL = alpha.length; i < aL; i++) {\r\n            var char_normal = alpha[i]\r\n                , char_alt = null\r\n                , char_caps = null\r\n                , char_shift = null\r\n                , char = [char_normal]\r\n\r\n            if (shift.hasOwnProperty(i)) {\r\n                cs = __doParse(shift[i]);\r\n                ics = i;\r\n            }\r\n            if (ics > -1 && cs[i - ics]) {\r\n                char_shift = cs[i - ics];\r\n                char[VK_SHIFT] = char_shift;\r\n            } else if (char_normal && char_normal != (char_normal = char_normal.toUpperCase())) {\r\n                char[VK_SHIFT] = char_normal;\r\n                char_shift = char_normal;\r\n            }\r\n\r\n            if (alt.hasOwnProperty(i)) {\r\n                ca = __doParse(alt[i]);\r\n                ica = i;\r\n            }\r\n            if (ica > -1 && ca[i - ica]) {\r\n                char_alt = ca[i - ica];\r\n                char[VK_ALT_CTRL] = char_alt;\r\n            }\r\n\r\n            if (shift_alt.hasOwnProperty(i)) {\r\n                csa = __doParse(shift_alt[i]);\r\n                icsa = i;\r\n            }\r\n            if (icsa > -1 && csa[i - icsa]) {\r\n                char[VK_SHIFT_ALT_CTRL] = csa[i - icsa];\r\n            } else if (char_alt && char_alt != (char_alt = char_alt.toUpperCase())) {\r\n                char[VK_SHIFT_ALT_CTRL] = char_alt;\r\n            }\r\n\r\n            if (caps.hasOwnProperty(i)) {\r\n                cc = __doParse(caps[i]);\r\n                icc = i;\r\n            }\r\n            if (icc > -1 && cc[i - icc]) {\r\n                char_caps = cc[i - icc];\r\n            }\r\n            if (char_caps) {\r\n                char[VK_CAPS] = char_caps;\r\n            } else if (char_shift && char_shift.toUpperCase() != char_shift.toLowerCase()) {\r\n                char[VK_CAPS] = char_shift;\r\n            } else if (char_normal) {\r\n                char[VK_CAPS] = char_normal.toUpperCase();\r\n            }\r\n\r\n            if (shift_caps.hasOwnProperty(i)) {\r\n                csc = __doParse(shift_caps[i]);\r\n                icsc = i;\r\n            }\r\n            if (icsc > -1 && csc[i - icsc]) {\r\n                char[VK_SHIFT_CAPS] = csc[i - icsc];\r\n            } else if (char_shift) {\r\n                char[VK_SHIFT_CAPS] = char_shift.toLowerCase();\r\n            } else if (char_normal) {\r\n                char[VK_SHIFT_CAPS] = char_normal;\r\n            }\r\n\r\n            lt[i] = char;\r\n        }\r\n\r\n        if (dk) {\r\n            lt.dk = {};\r\n            for (var i in dk) {\r\n                if (dk.hasOwnProperty(i)) {\r\n                    var key = i;\r\n                    if (parseInt(i) && i > 9) {\r\n                        key = String.fromCharCode(i);\r\n                    }\r\n                    \r\n                    lt.dk[key] = __doParse(dk[i]).join(\"\").replace(key, key + key);\r\n                }\r\n            }\r\n        }\r\n\r\n        \r\n        lt.rtl = !!lt.join(\"\").match(/[\\u05b0-\\u06ff]/)\r\n\r\n        \r\n        lt.domain = l.domain\r\n\r\n        \r\n        if (isFunction(cbk)) {\r\n            lt.charProcessor = cbk\r\n        } else if (cbk) {\r\n            lt.activate = cbk.activate;\r\n            lt.charProcessor = cbk.charProcessor;\r\n        }\r\n        return lt;\r\n    }\r\n    \r\n    var __updateLayout = function () {\r\n        var ca = [];\r\n        ca[VK_NORMAL] = cssClasses.modeNormal;\r\n        ca[VK_SHIFT] = cssClasses.modeShift;\r\n        ca[VK_ALT_CTRL] = cssClasses.modeAlt;\r\n        ca[VK_SHIFT_ALT_CTRL] = cssClasses.modeShiftAlt;\r\n        ca[VK_CAPS] = cssClasses.modeCaps;\r\n        ca[VK_SHIFT_CAPS] = cssClasses.modeShiftCaps;\r\n       \r\n        ca[VK_ALT] = cssClasses.modeNormal;\r\n        ca[VK_CTRL] = cssClasses.modeNormal;\r\n        ca[VK_ALT_SHIFT] = cssClasses.modeShift;\r\n        ca[VK_CTRL_SHIFT] = cssClasses.modeShift;\r\n        ca[VK_ALT_CAPS] = cssClasses.modeCaps;\r\n        ca[VK_CTRL_CAPS] = cssClasses.modeCaps;\r\n       \r\n        ca[VK_ALT_CTRL_CAPS] = cssClasses.modeShiftAltCaps;\r\n        ca[VK_ALL] = cssClasses.modeShiftAltCaps;\r\n\r\n        DOM.CSS(nodes.desk).removeClass(ca).addClass(ca[mode]);\r\n    }\r\n    \r\n    var __updateControlKeys = function (newMode) {\r\n        \r\n        var changes = mode ^ newMode;\r\n        if (changes & VK_SHIFT) {\r\n            __toggleControlKeysState(!!(newMode & VK_SHIFT), KEY.SHIFT);\r\n        }\r\n        if (changes & VK_ALT) {\r\n            __toggleControlKeysState(!!(newMode & VK_ALT), KEY.ALT);\r\n        }\r\n        if (changes & VK_CTRL) {\r\n            __toggleControlKeysState(!!(newMode & VK_CTRL), KEY.CTRL);\r\n        }\r\n        if (changes & VK_CAPS) {\r\n            __toggleKeyState(!!(newMode & VK_CAPS), KEY.CAPS);\r\n        }\r\n        mode = newMode;\r\n    }\r\n    \r\n    var __toggleControlKeysState = function (state, prefix) {\r\n        var s1 = document.getElementById(idPrefix + prefix + '_left')\r\n            , s2 = document.getElementById(idPrefix + prefix + '_right');\r\n        switch (0 + state) {\r\n            case 0:\r\n                s1.className = DOM.CSS(s2).removeClass(cssClasses.buttonDown).getClass();\r\n                break;\r\n            case 1:\r\n                DOM.CSS(nodes.desk).removeClass([cssClasses.hoverShift, cssClasses.hoverAlt]);\r\n                s1.className = DOM.CSS(s2).addClass(cssClasses.buttonDown).getClass();\r\n                break;\r\n            case 2:\r\n                if (KEY.SHIFT == prefix && mode & VK_SHIFT ^ VK_SHIFT) {\r\n                    DOM.CSS(nodes.desk).addClass(cssClasses.hoverShift);\r\n                } else if (KEY.ALT == prefix && mode ^ VK_ALT_CTRL) {\r\n                    DOM.CSS(nodes.desk).addClass(cssClasses.hoverAlt);\r\n                }\r\n                s1.className = DOM.CSS(s2).addClass(cssClasses.buttonHover).getClass();\r\n                break;\r\n            case 3:\r\n                if (KEY.SHIFT == prefix) {\r\n                    DOM.CSS(nodes.desk).removeClass(cssClasses.hoverShift);\r\n                } else if (KEY.ALT == prefix) {\r\n                    DOM.CSS(nodes.desk).removeClass(cssClasses.hoverAlt);\r\n                }\r\n                s1.className = DOM.CSS(s2).removeClass(cssClasses.buttonHover).getClass();\r\n                break;\r\n        }\r\n    }\r\n    \r\n    var __toggleKeyState = function (state, suffix, name) {\r\n        var s = document.getElementById(suffix ? idPrefix + suffix\r\n            : name);\r\n        if (s) {\r\n            switch (0 + state) {\r\n                case 0:\r\n                    DOM.CSS(s).removeClass(cssClasses.buttonDown);\r\n                    break;\r\n                case 1:\r\n                    DOM.CSS(s).addClass(cssClasses.buttonDown);\r\n                    break;\r\n                case 2:\r\n                    DOM.CSS(s).addClass(cssClasses.buttonHover);\r\n                    break;\r\n                case 3:\r\n                    DOM.CSS(s).removeClass(cssClasses.buttonHover);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    var __charProcessor = function (tchr, buf) {\r\n        var res = [tchr, 0];\r\n        if (isFunction(lang.charProcessor)) {\r\n            \r\n            res = lang.charProcessor(tchr, buf);\r\n        } else if (tchr == \"\\x08\") {\r\n            res = ['', 0];\r\n        } else if (lang.dk && buf.length <= 1) {\r\n            \r\n            if (lang.dk.hasOwnProperty(buf)) {\r\n                \r\n                res[1] = 0;\r\n                var dks = lang.dk[buf],\r\n                idx = dks.indexOf(tchr) + 1;\r\n                res[0] = idx ? dks.charAt(idx)\r\n                    : tchr;\r\n            } else if (lang.dk.hasOwnProperty(tchr)) {\r\n                \r\n                res[1] = 1;\r\n                res[0] = tchr;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    \r\n    var __getKeyboardHtml = function (lang) {\r\n        var inp = document.createElement('span');\r\n        \r\n        document.body.appendChild(inp);\r\n        inp.style.position = 'absolute';\r\n        inp.style.left = '-1000px';\r\n\r\n        for (var i = 0, aL = lang.length, btns = [], chr, title; i < aL; i++) {\r\n            chr = lang[i];\r\n            btns.push([\"<div id='\", idPrefix, i\r\n                , \"' class='\", cssClasses.buttonUp\r\n                , \"'><a>\", __getCharHtmlForKey(lang, chr, VK_NORMAL, cssClasses.charNormal, inp)\r\n                , __getCharHtmlForKey(lang, chr, VK_SHIFT, cssClasses.charShift, inp)\r\n                , __getCharHtmlForKey(lang, chr, VK_ALT_CTRL, cssClasses.charAlt, inp)\r\n                , __getCharHtmlForKey(lang, chr, VK_SHIFT_ALT_CTRL, cssClasses.charShiftAlt, inp)\r\n                , __getCharHtmlForKey(lang, chr, VK_CAPS, cssClasses.charCaps, inp)\r\n                , __getCharHtmlForKey(lang, chr, VK_SHIFT_CAPS, cssClasses.charShiftCaps, inp)\r\n                , \"</a></div>\"].join(\"\"));\r\n\r\n        }\r\n        for (var i in controlKeys) {\r\n            if (controlKeys.hasOwnProperty(i)) {\r\n                chr = controlKeys[i];\r\n                title = chr.replace(/_.+/, '');\r\n                btns.splice(i, 0, [\"<div id='\", idPrefix, chr\r\n                    , \"' class='\", cssClasses.buttonUp\r\n                    , \"'><a title='\", title, \"'\"\r\n                    , \"><span class='title'>\", title, \"</span>\"\r\n                    , \"</a></div>\"].join(\"\"));\r\n            }\r\n        }\r\n        document.body.removeChild(inp);\r\n        return btns.join(\"\").replace(/(<\\w+)/g, \"$1 unselectable='on' \");\r\n    }\r\n    \r\n    var __getCharHtmlForKey = function (lyt, chr, mode, css, inp) {\r\n        var html = []\r\n            , dk = lyt.dk && lyt.dk.hasOwnProperty(chr[mode])\r\n            , char = chr[mode] || \"\"\r\n\r\n        \r\n        if (dk) css += \" \" + cssClasses.deadkey;\r\n\r\n        \r\n        if ((mode == VK_SHIFT_CAPS && chr[VK_CAPS] && char.toLowerCase() == chr[VK_CAPS].toLowerCase())\r\n            || (mode == VK_CAPS && chr[VK_SHIFT_CAPS] && char.toLowerCase() == chr[VK_SHIFT_CAPS].toLowerCase())) {\r\n            css += \" \" + cssClasses.hiddenCaps;\r\n        }\r\n        if ((mode == VK_SHIFT && chr[VK_NORMAL] && char.toLowerCase() == chr[VK_NORMAL].toLowerCase())\r\n            || (mode == VK_NORMAL && chr[VK_SHIFT] && char.toLowerCase() == chr[VK_SHIFT].toLowerCase())) {\r\n            css += \" \" + cssClasses.hiddenShift;\r\n        }\r\n        if ((mode == VK_SHIFT && chr[VK_SHIFT_CAPS] && char.toLowerCase() == chr[VK_SHIFT_CAPS].toLowerCase())\r\n            || (mode == VK_SHIFT_CAPS && chr[VK_SHIFT] && char.toLowerCase() == chr[VK_SHIFT].toLowerCase())) {\r\n            css += \" \" + cssClasses.hiddenShiftCaps;\r\n        }\r\n        if ((mode == VK_CAPS && chr[VK_NORMAL] && char.toLowerCase() == chr[VK_NORMAL].toLowerCase())\r\n            || (mode == VK_NORMAL && chr[VK_CAPS] && char.toLowerCase() == chr[VK_CAPS].toLowerCase())) {\r\n            css += \" \" + cssClasses.hiddenCaps;\r\n        }\r\n        if ((mode == VK_SHIFT_ALT_CTRL && chr[VK_ALT_CTRL] && char.toLowerCase() == chr[VK_ALT_CTRL].toLowerCase())\r\n            || (mode == VK_ALT_CTRL && chr[VK_SHIFT] && char.toLowerCase() == chr[VK_SHIFT].toLowerCase())) {\r\n            css += \" \" + cssClasses.hiddenAlt;\r\n        }\r\n\r\n        html.push(\"<span\");\r\n        if (css) {\r\n            html.push(\" class=\\\"\" + css + \"\\\"\");\r\n        }\r\n        html.push(\" >\\xa0\" + char + \"\\xa0</span>\");\r\n        return html.join(\"\");\r\n    }\r\n\r\n    \r\n   \r\n    var _initialized = false;\r\n    self.init = function(opts) {\r\n        console.log(_initialized);\r\n        if (_initialized) return;\r\n        var _opts = mergeObject(options, opts);\r\n\r\n        \r\n        nodes.keyboard = document.createElement('div');\r\n        nodes.keyboard.unselectable = \"on\";\r\n        nodes.keyboard.id = 'virtualKeyboard';\r\n        nodes.keyboard.innerHTML = ('<div id=\\\"kbDesk\\\"><!-- --></div>'\r\n            + '<select id=\\\"kb_langselector\\\" ' + (_opts.showKeyboardLayouts ? '' : 'style=\\\"display: none;\\\"') + '></select>'\r\n            + '<select id=\\\"kb_mappingselector\\\" ' + (_opts.showKeyboardMaps ? '' : 'style=\\\"display: none;\\\"') + '></select>'\r\n           \r\n        ).replace(/(<\\w+)/g, \"$1 unselectable='on' \");\r\n\r\n        nodes.desk = nodes.keyboard.firstChild;\r\n\r\n        var el = nodes.keyboard.childNodes.item(1);\r\n        EM.addEventListener(el, 'change', function (e) { self.switchLayout(this.value) });\r\n        nodes.langbox = el;\r\n\r\n        var el = el.nextSibling\r\n            , mapGroup = \"\";\r\n\r\n       \r\n       \r\n\r\n        if (!keymaps.hasOwnProperty(keymap))\r\n            keymap = 'QWERTY Standard';\r\n\r\n        for (var i in keymaps) {\r\n            var map = keymaps[i].split(\"\").map(function (c) { return c.charCodeAt(0) });\r\n            \r\n            map.splice(14, 0, 8, 9);\r\n            map.splice(28, 0, 13, 20);\r\n            map.splice(41, 0, 16);\r\n            map.splice(52, 0, 16, 46, 17, 18, 32, 18, 17);\r\n            \r\n            var tk = map;\r\n            map = [];\r\n            for (var z = 0, kL = tk.length; z < kL; z++) {\r\n                map[tk[z]] = z;\r\n            }\r\n            keymaps[i] = map;\r\n\r\n            \r\n            tk = i.split(\" \", 2);\r\n            if (mapGroup.indexOf(mapGroup = tk[0]) != 0) {\r\n                el.appendChild(document.createElement('optgroup'))\r\n                el.lastChild.label = mapGroup;\r\n            }\r\n            map = document.createElement('option');\r\n            el.lastChild.appendChild(map);\r\n            map.value = i;\r\n            map.innerHTML = tk[1];\r\n            map.selected = (i == keymap);\r\n        }\r\n        keymap = keymaps[keymap];\r\n        EM.addEventListener(el, 'change', switchMapping);\r\n\r\n        \r\n        EM.addEventListener(nodes.desk, 'mousedown', _btnMousedown_);\r\n        EM.addEventListener(nodes.desk, 'mouseup', _btnClick_);\r\n        EM.addEventListener(nodes.desk, 'mouseover', _btnMouseInOut_);\r\n        EM.addEventListener(nodes.desk, 'mouseout', _btnMouseInOut_);\r\n        EM.addEventListener(nodes.desk, 'click', EM.preventDefaultAction);\r\n\r\n        \r\n        nodes.keyboard.onmousedown = function (e) { if (!e || !e.target.tagName || 'select' != e.target.tagName.toLowerCase()) return false }\r\n\r\n        \r\n       \r\n       \r\n        options.layout = _opts.layout;\r\n\r\n        _initialized = true;\r\n    }\r\n}\r\n\r\nVirtualKeyboard.Langs = {};\r\n\r\nVirtualKeyboard.IME = IME;\r\n\r\n\r\n(function ($) {\r\n    $.fn.virtkeys = function (opts) {\r\n        var jqObj = this;\r\n\r\n        (function () {\r\n            VirtualKeyboard.init(opts || {});\r\n        \r\n            jqObj.VirtualKeyboard = VirtualKeyboard;\r\n            \r\n            jqObj.open = _open;\r\n            jqObj.close = _close;\r\n            jqObj.toggle = _toggle;\r\n\r\n            jqObj.getLayoutCodes = _getLayoutCodes;\r\n            jqObj.switchLayout = _switchLayout;\r\n            jqObj.addLayouts = _addLayouts;\r\n            jqObj.getLoadedLayouts = _getLoadedLayouts;\r\n\r\n            jqObj.addIMELanguages = _addIMELanguages;\r\n        })();\r\n\r\n\r\n        function _open (input) {\r\n            VirtualKeyboard.open(input instanceof $ ? input.get(0) : input, this.get(0));\r\n        }\r\n\r\n        function _close () {\r\n            VirtualKeyboard.close();\r\n        }\r\n\r\n        function _toggle (input) {\r\n            VirtualKeyboard.toggle(input instanceof $ ? input.get(0) : input, this.get(0));\r\n        }\r\n\r\n       \r\n        function _getLayoutCodes() {\r\n            return VirtualKeyboard.getLayoutCodes();\r\n        }\r\n\r\n        function _switchLayout(code) {\r\n            return VirtualKeyboard.switchLayout(code);\r\n        }\r\n\r\n        function _addLayouts(layouts) {\r\n            for (var i = 0, aL = layouts.length; i < aL; i++) {\r\n                VirtualKeyboard.addLayout(layouts[i]);\r\n            }\r\n        }\r\n\r\n        function _getLoadedLayouts() {\r\n            return $.fn.virtkeys._layouts;\r\n        }\r\n\r\n        function _addIMELanguages(langs) {\r\n            if (langs === undefined && (langs = $.fn.virtkeys._langs) === undefined)\r\n                throw 'Object containing IME languages cannot be found.';\r\n\r\n            VirtualKeyboard.Langs = langs;\r\n        }\r\n\r\n        return jqObj;\r\n    };\r\n\r\n    $.fn.virtkeys._layouts = {};\r\n} (jQuery));\n\n\n// WEBPACK FOOTER //\n// ./src/virtualkeyboard.js","\r\n\r\n\r\n\r\n\r\nfunction isUndefined(prop )  {\r\n    return (typeof prop == 'undefined');\r\n}\r\n\r\nfunction isFunction(prop )  {\r\n    return (typeof prop == 'function');\r\n}\r\n\r\nfunction isString(prop )  {\r\n    return (typeof prop == 'string');\r\n}\r\n\r\nfunction isNumber(prop )  {\r\n    return (typeof prop == 'number');\r\n}\r\n\r\nfunction isNumeric(prop )  {\r\n    return (isNumber(prop) || isString(prop)) && !isNaN(parseInt(prop)) && isFinite(parseInt(prop));\r\n}\r\n\r\nfunction isArray(prop )  {\r\n    return (prop instanceof Array);\r\n}\r\n\r\nfunction isRegExp(prop )  {\r\n    return (prop instanceof RegExp);\r\n}\r\n\r\nfunction isBoolean(prop )  {\r\n    return ('boolean' == typeof prop);\r\n}\r\n\r\nfunction isScalar(prop )  {\r\n    return isNumeric(prop) || isString(prop) || isBoolean(prop);\r\n}\r\n\r\nfunction isEmpty(prop )  {\r\n    if (isBoolean(prop)) return false;\r\n    if (isRegExp(prop) && new RegExp(\"\").toString() == prop.toString()) return true;\r\n    if (isString(prop) || isNumber(prop)) return !prop;\r\n    if (Boolean(prop) && false != prop) {\r\n        for (var i in prop) if (prop.hasOwnProperty(i)) return false\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\n\r\n\r\nfunction gluePath()  {\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n    throw 'Commented out because of UglifyJsPlugin and RemoveCommentsLoader';\r\n}\r\n\r\n\r\nfunction findPath(sname )  {\r\n    var h = document.getElementsByTagName('html')[0].innerHTML\r\n        , sr = new RegExp('<scr' + 'ipt[^>]+?src\\s*=\\s*[\"\\']?([^>]+?/)' + sname + '[^>]*>.?</scr' + 'ipt>', 'i')\r\n        , m = h.match(sr);\r\n    if (m) {\r\n        \r\n        if (m[1].match(/^((https?|file)\\:\\/{2,}|\\w:[\\\\])/)) return m[1];\r\n        \r\n        if (m[1].indexOf(\"/\") == 0) return m[1];\r\n        b = document.getElementsByTagName('base');\r\n        if (b[0] && b[0].href) return b[0].href + m[1];\r\n        \r\n        return (document.location.href.match(/(.*[\\/\\\\])/)[0] + m[1]).replace(/^\\/+/, \"\");\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction getScriptQuery(sname) {\r\n    var h = document.getElementsByTagName('html')[0].innerHTML\r\n        , sr = new RegExp('<scr' + 'ipt[^>]+?src\\s*[^>]+?/' + sname + '([^#\"\\']*).+?</scr' + 'ipt>', 'i')\r\n        , m = h.match(sr);\r\n    if (m) return parseQuery(m[1].replace(/^[^?]*\\?([^#]+)/, \"$1\"));\r\n    return {};\r\n}\r\n\r\nfunction parseQuery(q) {\r\n    if ('string' != typeof q || q.length < 2) return {};\r\n    q = q.split(/&amp;|&/g);\r\n    for (var z = 0, qL = q.length, rs = {}, kv, rkv; z < qL; z++) {\r\n        kv = q[z].split(\"=\");\r\n        \r\n        kv[0] = kv[0].replace(/[{}\\[\\]]*$/, \"\");\r\n        rkv = rs[kv[0]];\r\n        \r\n        kv[1] = unescape(kv[1] ? kv[1].replace(\"+\", \" \") : \"\");\r\n        if (rkv)\r\n            if ('array' == typeof (rkv)) rs[kv[0]][rs[kv[0]].length] = kv[1];\r\n            else rs[kv[0]] = [rs[kv[0]], kv[1]];\r\n        else rs[kv[0]] = kv[1];\r\n    }\r\n    return rs\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction table2array(id, ci, section, subsection) {\r\n    if (isString(id)) id = document.getElementById(id);\r\n    if (!id || !DOM.hasTagName(id, ['table', 'tbody,', 'thead', 'tfoot'])) return null;\r\n    if (!isEmpty(section) && (!isString(section) || !(id = id.getElementsByTagName(section)))) return null;\r\n    if (!isEmpty(subsection) && (!isNumber(subsection) || subsection < 0 || !(id = id[subsection]))) return null;\r\n\r\n    if (isUndefined(id.rows)) return null;\r\n    var res = []\r\n        , span = document.createElement('span')\r\n        , ts = null\r\n        , ce = null\r\n    for (var i = 0, rL = id.rows.length; i < rL; i++) {\r\n        var tr = [];\r\n        if (isArray(ci)) {\r\n            for (var z = 0, cL = ci.length; z < cL; z++) {\r\n                ce = id.rows[i].cells[ci[z]];\r\n                if (ce) {\r\n                    span.innerHTML = ce.innerText ? ce.innerText : ce.innerHTML.replace(/<script\\s+(.|\\r?\\n)*?<\\/script>|<[^>]*>/g, \"\");\r\n                    span.normalize();\r\n                    tr[tr.length] = span.firstChild ? span.firstChild.nodeValue.trim(\" \\xA0\") : \"\";\r\n                } else {\r\n                    tr[tr.length] = \"\";\r\n                }\r\n            }\r\n        } else {\r\n            for (var z = 0, tL = id.rows[i].cells.length; z < tL; z++) {\r\n                cd = id.rows[i].cells[z];\r\n                span.innerHTML = ce.innerText ? ce.innerText : ce.innerHTML.replace(/<script\\s+(.|\\r?\\n)*?<\\/script>|<[^>]*>/g, \"\");\r\n                span.normalize();\r\n                tr[tr.length] = span.firstChild ? span.firstChild.nodeValue.trim(\" \\xA0\") : \"\";\r\n            }\r\n        }\r\n        if (!isEmpty(tr)) res[res.length] = tr;\r\n    }\r\n    return res;\r\n}\r\n\r\n\r\ndocument.createElementExt = function (tag , p )  {\r\n    var L, i, k, el = document.createElement(tag);\r\n    if (!el) return null;\r\n    for (i in p) {\r\n        if (!p.hasOwnProperty(i)) continue;\r\n        switch (i) {\r\n            case \"class\": el.setAttribute('className', p[i]); el.setAttribute('class', p[i]); break;\r\n            case \"style\": for (k in p[i]) { if (!p[i].hasOwnProperty(k)) continue; el.style[k] = p[i][k]; } break;\r\n            case \"event\": for (k in p[i]) { if (!p[i].hasOwnProperty(k)) continue; el.attachEvent(k, p[i][k]); } break;\r\n            case \"child\": L = p[i].length; for (k = 0; k < L; k++) el.appendChild(p[i][k]); break;\r\n            case \"param\": for (k in p[i]) { if (!p[i].hasOwnProperty(k)) continue; try { el[k] = p[i][k] } catch (e) { } } break;\r\n        }\r\n    }\r\n    return el;\r\n}\r\n\r\n\r\nfunction playInterval(f , i , o )  { return setInterval(function () { (o instanceof Array) ? f.apply(this, o) : f.call(this, o) }, i) }\r\nfunction playTimeout(f , i , o )  { return setTimeout(function () { (o instanceof Array) ? f.apply(this, o) : f.call(this, o) }, i) }\r\n\r\n\r\nfunction cloneObject(obj) {\r\n    if (isScalar(obj) || isFunction(obj) || null == obj) return obj;\r\n    try { var newObject = new obj.constructor(); } catch (e) { return null; }\r\n    if (isArray(newObject)) {\r\n        for (var i = 0, oL = obj.length; i < oL; i++) {\r\n            newObject[i] = cloneObject(obj[i]);\r\n        }\r\n    } else {\r\n        for (var i in obj) {\r\n            if (!obj.hasOwnProperty(i)) continue;\r\n            newObject[i] = cloneObject(obj[i]);\r\n        }\r\n    }\r\n    return newObject;\r\n}\r\n\r\n\r\nfunction mergeObject() {\r\n    var res = {}\r\n        , oi\r\n        , obj\r\n    for (var z = 0, aL = arguments.length; z < aL; z++) {\r\n        obj = arguments[z];\r\n        for (var i in obj) {\r\n            if (!obj.hasOwnProperty(i)) continue;\r\n            oi = obj[i];\r\n            if (null == oi) {\r\n                if (!res.hasOwnProperty(i)) res[i] = oi;\r\n            } else if (isArray(oi)) {\r\n                if (isArray(res[i]))\r\n                    res[i] = res[i].concat(oi).unique();\r\n                else\r\n                    res[i] = oi.slice(0);\r\n            } else if (isScalar(oi) || isFunction(oi)) {\r\n                res[i] = oi;\r\n            } else {\r\n                if (res.hasOwnProperty(i))\r\n                    res[i] = mergeObject(res[i], oi)\r\n                else\r\n                    res[i] = cloneObject(oi);\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction loadStyleSheet(sn) {\r\n    if (!hasStyleSheet(sn)) {\r\n        var head = document.getElementsByTagName('head')[0]\r\n            , link = document.createElement('link');\r\n        link.rel = 'stylesheet';\r\n        link.type = 'text/css';\r\n        link.href = sn;\r\n        head.appendChild(link);\r\n    }\r\n}\r\n\r\n\r\nfunction hasStyleSheet(path) {\r\n    var h = document.getElementsByTagName('html')[0].innerHTML\r\n        , sr = new RegExp('<link[^>]+?src\\s*=\\s*[\"\\']?([^>]+?/)' + sn + '[^>]*>', 'i');\r\n    return sr.test(h);\r\n}\r\n\r\nexport {\r\n    isUndefined, isFunction, isString, isNumber, isNumeric, isArray, isRegExp, isBoolean, isScalar, isEmpty,\r\n    gluePath, findPath, getScriptQuery, parseQuery,\r\n    table2array, playInterval, playTimeout, cloneObject, mergeObject, loadStyleSheet, hasStyleSheet\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/helpers.js","import { isUndefined } from './../helpers';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nif (isUndefined(Array.prototype.copy)) {\r\n    Array.prototype.copy = function () {\r\n        var copy = new Array();\r\n        for (var i = 0, tL = this.length; i < tL; i++) {\r\n            copy[i] = this[i];\r\n        }\r\n        return copy;\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nif (isUndefined(Array.prototype.unique)) {\r\n    \r\n    Array.prototype.unique = function ()  {\r\n        var tmp = [];\r\n        for (var i = 0, tL = this.length; i < tL; i++) {\r\n            if (tmp.indexOf(this[i]) < 0) tmp[tmp.length] = this[i];\r\n        }\r\n        return tmp;\r\n    };\r\n}\r\n\r\nif (isUndefined(Array.prototype.flatten)) {\r\n    \r\n    Array.prototype.flatten = function (cols , cd)  {\r\n        if (this.length < 1) return [];\r\n        if (isNumeric(cols)) cols = [cols];\r\n        var idx = false;\r\n        if (isArray(cols)) {\r\n            idx = {};\r\n            for (var i = 0, cL = cols.length; i < cL; i++) idx[cols[i]] = true;\r\n        }\r\n        var tmp = [];\r\n        for (var i = 0, tL = this.length; i < tL; i++) {\r\n            if (isUndefined(this[i])) continue;\r\n            if (!isArray(this[i])) {\r\n                if (false === idx) tmp[tmp.length] = this[i];\r\n            } else {\r\n                for (var k = 0, cL = this[i].length; k < cL; k++) {\r\n                    if (false === idx || idx.hasOwnProperty(k)) tmp[tmp.length] = this[i][k];\r\n                }\r\n            }\r\n        }\r\n        return tmp;\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nif (isUndefined(Array.prototype.binSearch)) {\r\n    \r\n    Array.prototype.binSearch = function (el, key) {\r\n        var l = 0\r\n            , r = this.length\r\n            , len = Math.max(r - 1, 0)\r\n            , c = Math.ceil(r / 2)\r\n            , cnt = 0\r\n        if (null != key)\r\n            while ((!this[c] || el != this[c][key]) && r >= l) {\r\n                if (this[c] && el > this[c][key])\r\n                    l = c + 1\r\n                else\r\n                    r = c - 1\r\n                c = Math.max(0, Math.ceil((r + l) / 2))\r\n            }\r\n        else\r\n            while (el != this[c] && r >= l) {\r\n                if (el > this[c])\r\n                    l = c + 1\r\n                else\r\n                    r = c - 1\r\n                c = Math.max(0, Math.ceil((r + l) / 2));\r\n            }\r\n        return c\r\n    }\r\n}\r\n\r\nArray.prototype.heapSort = function () {\r\n\r\n   \r\n    \r\n    var sift = function (arr, low, up) {\r\n        var c, tmp = arr[low];\r\n\r\n        while (true) {\r\n            c = (low << 1) + 1;\r\n            if (c > up) break;\r\n            if (c < up && arr[c + 1] > arr[c]) c++;\r\n            if (tmp >= arr[c]) break;\r\n            arr[low] = arr[c];\r\n            low = c;\r\n        }\r\n        arr[low] = tmp;\r\n    },\r\n        tmp,\r\n        maximal = this.length - 1,\r\n        i = maximal >> 1;\r\n\r\n    while (i >= 0)\r\n        sift(this, i--, maximal);\r\n\r\n    i = maximal;\r\n    while (i > 0) {\r\n       \r\n        tmp = this[0];\r\n        this[0] = this[i];\r\n        this[i] = tmp;\r\n        sift(this, 0, --i);\r\n    }\r\n    return this;\r\n}\r\n\r\n\r\n\r\nif (isUndefined(Array.range)) {\r\n    \r\n    Array.range = function (end , start , inc )  {\r\n        if (!isNumber(end)) return null;\r\n        if (!isNumber(inc)) inc = 1;\r\n        if (!isNumber(start)) start = 0;\r\n        var tmp = []\r\n            , mn = Math.min(start, end)\r\n            , mx = Math.max(start, end)\r\n            , i = Math.abs(inc)\r\n            , cnt = -1;\r\n        do {\r\n            cnt++;\r\n            tmp[cnt] = mn;\r\n            mn += i;\r\n        } while (mn <= mx);\r\n        return inc > 0 ? tmp : tmp.reverse();\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/ext/array.js","\r\nif ('undefined' == typeof Object.hasOwnProperty) {\r\n  Object.prototype.hasOwnProperty = function (prop) {\r\n    return !('undefined' == typeof this[prop] || this.constructor && this.constructor.prototype[prop] && this[prop] === this.constructor.prototype[prop]);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/ext/object.js","\r\n\r\nRegExp.escape = function escape (text )  {\r\n  if (!escape.sRE) {\r\n    var specials = [\r\n      '/', '.', '*', '+', '?', '|',\r\n      '(', ')', '[', ']', '{', '}', '$', '^', '\\\\'\r\n    ];\r\n    escape.sRE = new RegExp(\r\n      '(\\\\' + specials.join('|\\\\') + ')', 'g'\r\n    );\r\n  }\r\n  return isString(text)?text.replace(escape.sRE, '\\\\$1')\r\n                       :(isArray(text)?text.map(RegExp.escape).join(\"|\")\r\n                                      :\"\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/ext/regexp.js","\r\n\r\nString.fromCharCodeExt = function(code) {\r\n    if (code<0x10000) {\r\n        return String.fromCharCode(code);\r\n    }\r\n    code -= 0x10000;\r\n    return String.fromCharCode(code >>10 | 0xD800)+String.fromCharCode(code & 0x3FF | 0xDC00)\r\n}\r\n\r\nString.prototype.entityDecode = function entityDecode() {\r\n    if (!entityDecode.span) entityDecode.span = document.createElement('span');\r\n    var s = entityDecode.span;\r\n    s.innerHTML = this;\r\n    return s.firstChild?s.firstChild.nodeValue:\"\";\r\n}\r\n\r\n\r\nString.prototype.ltrim = function(c) {\r\n    if (isString(c)) c=c.split(\"\");\r\n    if (isArray(c) || isUndefined(c)) {\r\n        c = isEmpty(c)?\"\\\\s\":RegExp.escape(c); \r\n        c = new RegExp(\"^(?:\"+c+\")+\", \"g\");\r\n        return this.replace(c, \"\");\r\n    }\r\n    return this; \r\n}\r\n\r\nString.prototype.rtrim = function(c) {\r\n    if (isString(c)) c=c.split(\"\");\r\n    if (isArray(c) || isUndefined(c)) {\r\n        c = isEmpty(c)?\"\\\\s\":RegExp.escape(c); \r\n        c = new RegExp(\"(?:\"+c+\")+$\", \"g\");\r\n        return this.replace(c, \"\");\r\n    }\r\n    return this; \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nString.prototype.dup = function() {\r\n    var val = this.valueOf();\r\n    return [val,val].join(\"\");\r\n}\r\n\r\nString.prototype.repeat = function(n )  {\r\n    if (isNaN(n=parseInt(n)) || n<0) return \"\";\r\n    return Array(n+1).join(this.valueOf());\r\n}\r\n\r\nString.prototype.padding = function(n, c) {\r\n    var val = this.valueOf();\r\n    n = parseInt(n);\r\n    if (!n) return val;\r\n    if (isUndefined(c)) c = \" \";\r\n    var pad = String(c).charAt(0).repeat(Math.abs(n) - this.length);\r\n    return (n < 0) ? pad + val : val + pad;\r\n}\r\n\r\nString.prototype.padLeft = function(n, c) {\r\n    return this.padding(-Math.abs(n), c);\r\n}\r\n\r\nString.prototype.padRight = function(n, c) {\r\n    return this.padding(Math.abs(n), c);\r\n}\r\n\r\n\r\nString.prototype.sprintf = function() {\r\n    var args = isArray(arguments[0])?arguments[0]:arguments\r\n       ,index = 0\r\n       ,frmt = this.replace(/%%/g, \"\\0\\0\")\r\n       ,re = /%((?:\\d+\\$)?)((?:[-0+# ])?)((?:\\d+|\\*(?:\\d+\\$)?)?)((?:.(?:\\d+|\\*(?:\\d+\\$)?))?)([bcdeEfosuxX])/g;\r\n    \r\n    frmt = frmt.replace(re, function() {\r\n        var x = arguments\r\n           ,sign = false\r\n           ,ins;\r\n\r\n        \r\n        if (!isUndefined(x[3]) && x[3].indexOf(\"*\")==0) {\r\n            x[3] = parseInt(x[3].replace(/\\D/g,\"\"))\r\n            if (isNaN(x[3])) {\r\n              x[3] = args[index];\r\n              \r\n              index++;\r\n            } else {\r\n              x[3] = args[x[3]]  \r\n            }\r\n        }\r\n        \r\n        if (\"\" != x[4]) {\r\n            if (x[4].indexOf(\"*\")==1) {\r\n                x[4] = parseInt(x[4].replace(/\\D/g,\"\"))\r\n                if (isNaN(x[4])) {\r\n                  x[4] = args[index];\r\n                  \r\n                  index++;\r\n                } else {\r\n                  x[4] = args[x[4]]  \r\n                }\r\n            } else {\r\n                x[4] = x[4].replace(/\\D/,\"\")\r\n            }\r\n            x[4] = Math.abs(x[4]);\r\n        }\r\n           \r\n        x[1] = parseInt(x[1]);\r\n        var ins;\r\n        if (isNumeric(x[1])) {\r\n            ins = args[x[1]];\r\n        } else {\r\n            ins = args[index];\r\n            \r\n            index++;\r\n        }\r\n        switch (x[5]) {\r\n        case \"b\":\r\n            if (ins<0) ins = 0x10000000000000000+parseInt(ins);\r\n            ins = Number(ins).bin(x[4]);\r\n            if (x[4]) ins = ins.substr(0,x[4]);\r\n            if (x[2]=='#') ins = '0b'+ins;\r\n            break;\r\n        case \"c\":\r\n            ins = String.fromCharCode(ins);\r\n            break;\r\n        case \"u\":\r\n            ins = Math.abs(ins);  \r\n        case \"d\":\r\n            ins = Math.round(ins);       \r\n            if (ins<0) {\r\n                ins = \"-\"+Math.abs(ins).dec(x[4]);\r\n            } else {\r\n                ins = Number(ins).dec(x[4]);\r\n                sign = (x[2] == ' ' || x[2] == '+');\r\n            }\r\n            break;\r\n        case \"e\":\r\n        case \"E\":\r\n            if (ins>0) {\r\n                sign = (x[2] == ' ' || x[2] == '+');\r\n            }\r\n            ins = Number(ins).toExponential(x[4]?x[4]:6);\r\n            if (x[5]=='E') ins=ins.toUpperCase();\r\n            break;\r\n        case \"f\":\r\n            if (ins>0) {\r\n                sign = (x[2] == ' ' || x[2] == '+');\r\n            }\r\n            ins = Number(ins).toFixed(isNumeric(x[4])?x[4]:6);\r\n            break;\r\n        case \"o\":\r\n            if (ins<0) ins = 0x10000000000000000+parseInt(ins);\r\n            ins = Number(ins).toString(8);\r\n            if (x[4]) ins = ins.substr(0,x[4]);\r\n            if (x[2]=='#' && ins != 0) ins = '0'+ins;\r\n            break;\r\n        case \"s\":\r\n            ins = String(ins);\r\n            if (x[4]) ins = ins.substr(0,x[4]);\r\n            break;\r\n        case \"x\":\r\n        case \"X\":\r\n            if (ins<0) ins = 0x10000000000000000+parseInt(ins);\r\n            ins = Number(ins).hex(-x[4]);\r\n            if (x[4]) ins = ins.substr(0,x[4]);\r\n            if (x[2]=='#') ins = '0x'+ins;\r\n            if (x[5]=='X') ins = ins.toUpperCase();\r\n            break;\r\n        }\r\n        if (sign) ins = x[2]+ins;\r\n        if (x[3]) ins = (x[2]=='-' || x[3]<0)?ins.padRight(x[3]):ins.padLeft(x[3],x[2]=='0'?0:\" \");\r\n        return ins;\r\n    })\r\n    return frmt.replace(/\\0\\0/g, \"%\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/ext/string.js","import { DOM } from './dom';\r\n\r\n\r\n\r\nvar DocumentSelection = new function () {\r\n    var self = this;\r\n    \r\n    var keys = {\r\n        'prevCalcNode': '__prevCalcNode'\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n    var callMethod = function (m, arg) {\r\n        var el = arg[0]\r\n            , id\r\n            , module = \"\"\r\n        if (!el || !el.tagName) return false;\r\n        switch (arg[0].tagName.toLowerCase()) {\r\n            case 'input':\r\n                if (el.type && el.type != 'text' && el.type != 'password') return false;\r\n            case 'textarea':\r\n                module = \"input\";\r\n                break;\r\n            case 'iframe':\r\n                module = \"frame\";\r\n                arg[0] = el.contentWindow;\r\n                break;\r\n            default:\r\n                return false;\r\n        }\r\n        \r\n        if ('function' == typeof self.module[module])\r\n            self.module[module] = new self.module[module](keys);\r\n        \r\n        if (!self.module[module] || !self.module[module][m])\r\n            throw new Error('Method \\'' + m + '\\' is not implemented for DocumentSelection \\'' + module + '\\' module.');\r\n\r\n        return self.module[module][m].apply(self, arg);\r\n    }\r\n    \r\n    var keepScroll = function (el, ot, ol) {\r\n        if (window.getSelection && 'iframe' != el.tagName.toLowerCase()) {\r\n            var q = self.getSelectionOffset(el)\r\n            if (el.contentWindow) el = el.contentWindow.document.body;\r\n\r\n            if (ot > q.y) el.scrollTop = q.y;\r\n            else if (ot + el.clientHeight > q.y) el.scrollTop = ot;\r\n            else el.scrollTop = q.y - el.clientHeight / 2;\r\n\r\n            if (ol > q.x) el.scrollLeft = q.x;\r\n            else if (ol + el.clientWidth > q.x) el.scrollLeft = ol;\r\n            else el.scrollLeft = q.x - el.clientWidth / 2;\r\n        }\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n    self.setRange = function (el, start, end, related) {\r\n        var ot = el.scrollTop\r\n            , ol = el.scrollLeft\r\n        \r\n        if (related) {\r\n            var st = self.getStart(el);\r\n            end = st + end;\r\n            start = st + start;\r\n        }\r\n        if (start < 0) start = 0;\r\n        if (end < start) end = start;\r\n\r\n        callMethod('setRange', [el, start, end]);\r\n\r\n        keepScroll(el, ot, ol);\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n    self.getSelection = function (el) {\r\n        return callMethod('getSelection', [el]);\r\n    }\r\n    \r\n    self.getStart = function (el) {\r\n        return callMethod('getPos', [el])[0];\r\n    }\r\n    \r\n    self.getEnd = function (el) {\r\n        return callMethod('getPos', [el])[0];\r\n    }\r\n    \r\n    self.getCursorPosition = function (el) {\r\n        return self.getStart(el);\r\n    }\r\n   \r\n   \r\n   \r\n    \r\n    self.insertAtCursor = function (el, val, keep) {\r\n        var ot = el.scrollTop\r\n            , ol = el.scrollLeft\r\n        if (!keep) {\r\n            callMethod('del', [el]);\r\n        }\r\n        var pos = callMethod('ins', [el, val]);\r\n        keepScroll(el, ot, ol);\r\n        return pos;\r\n    }\r\n    \r\n    self.wrapSelection = function (el, start, end) {\r\n        var s = self.getCursorPosition(el)\r\n            , e = self.getEnd(el)\r\n        if (s == e) {\r\n            self.insertAtCursor(el, start + end);\r\n        } else {\r\n            self.insertAtCursor(el, start, true);\r\n            self.setRange(el, e + start.length, e + start.length);\r\n            self.insertAtCursor(el, end, true);\r\n        }\r\n    }\r\n\r\n    \r\n    self.deleteAtCursor = function (el, after) {\r\n        if (!self.getSelection(el)) {\r\n            if (after)\r\n                self.setRange(el, 0, 1, true);\r\n            else\r\n                self.setRange(el, -1, 0, true);\r\n        }\r\n        return self.deleteSelection(el);\r\n    }\r\n    \r\n    self.deleteSelection = function (el) {\r\n        var ol = el.scrollLeft\r\n            , ot = el.scrollTop\r\n            , ret = callMethod('del', [el]);\r\n        keepScroll(el, ot, ol);\r\n        return ret;\r\n    }\r\n    \r\n    self.getSelectionOffset = function (el) {\r\n        return callMethod('getSelectionOffset', [el], true);\r\n    }\r\n    \r\n    self.getContext = function (el) {\r\n        return callMethod('getContext', [el]);\r\n    }\r\n};\r\nDocumentSelection.module = {\r\n    \r\n    'input': function (keys) {\r\n        var self = this;\r\n        \r\n        var offsetCalculator = null;\r\n        \r\n        self.getContext = function (el) {\r\n            var pos = self.getPos(el)\r\n                , val = el.value\r\n                , r1 = val.match(new RegExp(\"(?:.|[\\\\r\\\\n]){0,\" + (pos[0] - 1) + \"}(?:^|\\\\s)\", \"m\")) || \"\"\r\n                , r2 = val.match(new RegExp(\"(?:.|[\\\\r\\\\n]){\" + pos[0] + \"}\", \"m\"))[0]\r\n                , r3 = val.replace(r2, \"\")\r\n                , r4 = r3.substring(0, pos[1] - pos[0])\r\n                , r5 = (r3.replace(r4, \"\")).match(/(?:\\S|$)*/)\r\n            return [r2.replace(r1, \"\"), r4, r5];\r\n        }\r\n        \r\n        self.getPos = function (el) {\r\n            var pos = [0, 0];\r\n            if ('function' == typeof window.getSelection) {\r\n                try {\r\n                    pos = [el.selectionStart, el.selectionEnd];\r\n                } catch (e) {\r\n                }\r\n            } else {\r\n                el.setActive();\r\n                pos = [Math.abs(el.document.selection.createRange().moveStart(\"character\", -100000000))\r\n                    , Math.abs(el.document.selection.createRange().moveEnd(\"character\", -100000000))];\r\n                \r\n                if (el.tagName.toLowerCase() != 'input') {\r\n                    \r\n                    var r = el.document.body.createTextRange();\r\n                    r.moveToElementText(el);\r\n                    var sTest = Math.abs(r.moveStart(\"character\", -100000000));\r\n                    pos[0] -= sTest;\r\n                    pos[1] -= sTest;\r\n                }\r\n            }\r\n            return pos;\r\n        }\r\n        \r\n        self.del = function (el) {\r\n            var ret = \"\"\r\n                , p = self.getPos(el)\r\n                , s = p[0]\r\n                , e = p[1];\r\n            if (s != e) {\r\n                \r\n                var tmp = document.selection && !window.opera ? el.value.replace(/\\r/g, \"\") : el.value;\r\n                ret = tmp.substring(s, e);\r\n                el.value = tmp.substring(0, s) + tmp.substring(e, tmp.length);\r\n                self.setRange(el, s, s);\r\n            }\r\n            return ret;\r\n        }\r\n        \r\n        self.ins = function (el, val) {\r\n            var ret = \"\"\r\n                , s = self.getPos(el)[0]\r\n            \r\n            var tmp = document.selection && !window.opera ? el.value.replace(/\\r/g, \"\") : el.value;\r\n            el.value = tmp.substring(0, s) + val + tmp.substring(s, tmp.length);\r\n            s += val.length;\r\n            self.setRange(el, s, s);\r\n            return s;\r\n        }\r\n        \r\n        self.getSelection = function (el) {\r\n            var p = self.getPos(el)\r\n                , s = p[0]\r\n                , e = p[1];\r\n            \r\n            if (e < s) e = s;\r\n            \r\n            var tmp = document.selection && !window.opera ? el.value.replace(/\\r/g, \"\") : el.value;\r\n            return tmp.substring(s, e);\r\n        }\r\n        \r\n        self.setRange = function (el, start, end) {\r\n            if ('function' == typeof el.setSelectionRange) {\r\n                \r\n                try { el.setSelectionRange(start, end) } catch (e) { }\r\n            } else {\r\n                \r\n                var range;\r\n                \r\n                try {\r\n                    range = el.createTextRange();\r\n                } catch (e) {\r\n                    try {\r\n                        range = el.document.body.createTextRange();\r\n                        range.moveToElementText(el);\r\n                    } catch (e) {\r\n                        return false;\r\n                    }\r\n                }\r\n                el.setActive();\r\n                range.collapse(true);\r\n                range.moveStart(\"character\", start);\r\n                range.moveEnd(\"character\", end - start);\r\n                range.select();\r\n            }\r\n        }\r\n        \r\n        self.getSelectionOffset = function (el) {\r\n            var range\r\n                , doc = DOM.getWindow(el).document;\r\n            if ('function' == typeof el.setSelectionRange) {\r\n                \r\n                if (!offsetCalculator) {\r\n                    \r\n                    offsetCalculator = doc.createElement('td');\r\n\r\n                    doc.body.appendChild(offsetCalculator);\r\n                }\r\n                \r\n                if (offsetCalculator[keys.prevCalcNode] != el) {\r\n                    offsetCalculator[keys.prevCalcNode] = el;\r\n                    var cs = doc.defaultView.getComputedStyle(el, null);\r\n                    for (var i in cs) {\r\n                        try { if (cs[i]) offsetCalculator.style[i] = cs[i]; } catch (e) { }\r\n                    }\r\n                    offsetCalculator.style.overflow = 'auto';\r\n                    offsetCalculator.style.position = 'absolute';\r\n                    offsetCalculator.style.visibility = 'hidden';\r\n                    offsetCalculator.style.zIndex = '-10';\r\n                    offsetCalculator.style.left = \"-10000px\";\r\n                    offsetCalculator.style.top = \"-10000px\";\r\n                    offsetCalculator.style.backgroundColor = 'yellow';\r\n                }\r\n                \r\n                var range = doc.createRange()\r\n                    , val = el.value || \" \";\r\n\r\n                if ('input' == el.tagName.toLowerCase()) {\r\n                    offsetCalculator.style.width = 'auto'\r\n                    offsetCalculator.style.whiteSpace = 'nowrap';\r\n                } else {\r\n                    offsetCalculator.style.whiteSpace = 'off' == el.getAttribute('wrap') ? \"pre\" : \"\";\r\n                }\r\n\r\n                val = val.replace(/\\x20\\x20/g, \"\\x20\\xa0\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt\");\r\n                offsetCalculator.innerHTML = (val.substring(0, el.selectionStart - 1) + \"<span>\" + val.substring(el.selectionStart - 1, el.selectionStart) + \"</span>\"\r\n                    + val.substring(el.selectionStart)).replace(/\\n/g, \"<br />\")\r\n                    .replace(/\\t/g, \"<em style=\\\"white-space:pre\\\">\\t</em>\")\r\n                \r\n                var span = offsetCalculator.getElementsByTagName('span')[0];\r\n                span.style.border = '1px solid red';\r\n                range.offsetLeft = span.offsetLeft// - el.scrollLeft + span.clientWidth;\r\n                range.offsetTop = span.offsetTop// - el.scrollTop;\r\n                range.offsetHeight = span.offsetHeight;\r\n                if (\"\\n\" == val.charAt(el.selectionStart - 1)) range.offsetTop += range.offsetHeight * 2;\r\n                span = null;\r\n            } else if (doc.selection && doc.selection.createRange) {\r\n                \r\n                range = doc.selection.createRange();\r\n                \r\n                range.offsetHeight = Math.round(range.boundingHeight / (range.text.replace(/[^\\n]/g, \"\").length + 1));\r\n                if (el.tagName && 'textarea' == el.tagName.toLowerCase()) {\r\n                    var xy = DOM.getOffset(el)\r\n                    range = {\r\n                        'offsetTop': range.offsetTop - xy.y + DOM.getBodyScrollTop(el)\r\n                        , 'offsetLeft': range.offsetLeft - xy.x + DOM.getBodyScrollLeft(el)\r\n                        , 'offsetHeight': range.offsetHeight\r\n                    }\r\n                }\r\n            }\r\n            if (range) {\r\n                return { 'x': range.offsetLeft, 'y': range.offsetTop, 'h': range.offsetHeight };\r\n            }\r\n            return { 'x': 0, 'y': 0, 'h': 0 };\r\n        }\r\n    }\r\n    , 'frame': function () {\r\n        var self = this;\r\n        \r\n        self.getContext = function (el) {\r\n            if ('function' == typeof el.getSelection) {\r\n                var pos = self.getPos(el)\r\n                    , val = el.document.body.innerText || el.document.body.innerHTML.replace(/<\\/?[a-z:]+[^>]*>/ig, \"\").replace(\"&nbsp;\", \" \")\r\n                    , r1 = val.match(new RegExp(\"(?:.|[\\\\r\\\\n]){0,\" + (pos[0] - 1) + \"}(?:^|\\\\s)\", \"m\")) || \"\"\r\n                    , r2 = val.match(new RegExp(\"(?:.|[\\\\r\\\\n]){\" + pos[0] + \"}\", \"m\")) || \"\"\r\n                    , r3 = val.replace(r2, \"\")\r\n                    , r4 = r3.substring(0, pos[1] - pos[0])\r\n                    , r5 = (r3.replace(r4, \"\")).match(/(?:\\S|$)*/)\r\n                return [r2.toString().replace(r1, \"\"), r4, r5];\r\n            } else {\r\n                var s1 = el.document.selection.createRange()\r\n                    , s2 = el.document.selection.createRange()\r\n                    , s3 = el.document.selection.createRange()\r\n                s1.moveStart(\"word\", -1)\r\n                s3.moveEnd(\"word\", 1)\r\n\r\n                return [s1.text.replace(new RegExp(RegExp.escape(s2.text) + \"$\"), \"\")\r\n                    , s2.text\r\n                    , s3.text.replace(new RegExp(\"^\" + RegExp.escape(s2.text)), \"\")];\r\n            }\r\n        }\r\n        \r\n        self.getPos = function (el) {\r\n            var pos = [0, 0];\r\n            if ('function' == typeof el.getSelection) {\r\n                \r\n                var sel = el.getSelection()\r\n                    , sn = sel.anchorNode\r\n                    , so = sel.anchorOffset\r\n                    , en = sel.focusNode\r\n                    , eo = sel.focusOffset\r\n                    , ss = false\r\n                    , es = false\r\n                    , sc = 0\r\n                    , ec = 0\r\n                    , cn\r\n                    , tw = el.document.createTreeWalker(el.document.body, NodeFilter.SHOW_TEXT, null, false)\r\n                while (sn && sn.nodeType != 3) {\r\n                    sn = sn.childNodes[so]\r\n                    so = 0;\r\n                }\r\n                while (en && en.nodeType != 3) {\r\n                    en = en.childNodes[eo]\r\n                    eo = 0;\r\n                }\r\n                while (cn = tw.nextNode()) {\r\n                    if (cn == en) {\r\n                        ec += eo\r\n                        es = true\r\n                    }\r\n                    if (cn == sn) {\r\n                        sc += so\r\n                        ss = true\r\n                    }\r\n                    if (!es) ec += cn.nodeValue.length\r\n                    if (!ss) sc += cn.nodeValue.length\r\n                    if (es && ss) break;\r\n                }\r\n                pos = [Math.min(ec, sc), Math.max(ec, sc)]\r\n            } else {\r\n                el.document.body.setActive();\r\n                pos = [Math.abs(el.document.selection.createRange().moveStart(\"character\", -100000000))\r\n                    , Math.abs(el.document.selection.createRange().moveEnd(\"character\", -100000000))];\r\n            }\r\n            return pos;\r\n        }\r\n        \r\n        self.del = function (el) {\r\n            if ('function' == typeof el.getSelection) {\r\n                var s = el.getSelection()\r\n                    , i = s.rangeCount\r\n                while (--i > -1) s.getRangeAt(i).deleteContents();\r\n\r\n                \r\n                var r = s.getRangeAt(s.rangeCount - 1)\r\n                r.insertNode(el.document.createTextNode(\"\"))\r\n                s.addRange(r);\r\n            } else if (el.document && el.document.selection) {\r\n                el.document.selection.createRange().text = \"\";\r\n                el.document.selection.createRange().select();\r\n            }\r\n        }\r\n        \r\n        self.ins = function (el, val) {\r\n            if ('function' == typeof el.getSelection) {\r\n                val = val.replace(/&/, \"&amp;\").replace(/</, \"&lt;\").replace(/>/, \"&gt;\").replace(/\\x20/, \"&nbsp;\").replace(/[\\r\\n]/, \"<br />\");\r\n                var n = el.document.createElement('span')\r\n                    , s = el.getSelection()\r\n                    , r = s.getRangeAt(0)\r\n                    , ln;\r\n                n.innerHTML = val;\r\n                r.insertNode(n);\r\n                r.selectNodeContents(n);\r\n\r\n                var pn = n.parentNode\r\n                    , ln = n.nextSibling\r\n\r\n                \r\n                n.parentNode.replaceChild(r.extractContents(), n);\r\n\r\n                \r\n                if (!ln)\r\n                    ln = pn.lastChild;\r\n\r\n                var r1 = el.document.createRange();\r\n                \r\n                if (ln.nodeValue) {\r\n                    \r\n                    r1.setStart(ln, 0);\r\n                } else {\r\n                    \r\n                    r1.setStartAfter(ln);\r\n                }\r\n\r\n                \r\n                s.removeAllRanges();\r\n                s.addRange(r1);\r\n\r\n            } else if (el.document && el.document.selection) {\r\n                el.document.body.setActive();\r\n                var r = el.document.selection.createRange();\r\n                r.text = val;\r\n                \r\n                if (r.moveStart(\"character\", 1)) {\r\n                    r.moveStart(\"character\", -1);\r\n                    r.moveEnd(\"character\", -1);\r\n                    r.select();\r\n                }\r\n            }\r\n            return self.getPos(el)[0];\r\n        }\r\n        \r\n        self.getSelection = function (el, s, e) {\r\n            if ('function' == typeof el.getSelection) {\r\n                var s = el.getSelection();\r\n                return s ? s.toString() : \"\";\r\n            } else if (el.document && el.document.selection) {\r\n                return el.document.selection.createRange().text;\r\n            }\r\n        }\r\n        \r\n        self.setRange = function (el, start, end) {\r\n            if ('function' == typeof el.getSelection) {\r\n                var sel = el.getSelection();\r\n                sel.removeAllRanges();\r\n                var r = el.document.createRange()\r\n                    , cnt = 0\r\n                    , cl = 0\r\n                    , cn\r\n                    , pn\r\n                    , tw = el.document.createTreeWalker(el.document.body, NodeFilter.SHOW_TEXT, null, false);\r\n\r\n                \r\n                while ((cn = tw.nextNode()) && (!cn.nodeValue.length || (cnt + cn.nodeValue.length <= start))) {\r\n                    pn = cn;\r\n                    cnt += cn.nodeValue.length;\r\n                }\r\n                \r\n                if (cn || (cn = pn)) {\r\n                    r.setStart(cn, start - cnt);\r\n                    r.setEnd(cn, start - cnt);\r\n                }\r\n                if (cn) {\r\n                    do {\r\n                        if (cn.nodeType != 3) continue;\r\n                        if (cnt + cn.nodeValue.length < end) {\r\n                            cnt += cn.nodeValue.length;\r\n                        } else {\r\n                            r.setEnd(cn, end - cnt);\r\n                            break;\r\n                        }\r\n                    } while (cn = tw.nextNode())\r\n                }\r\n                sel.addRange(r);\r\n            } else if (el.document && el.document.selection) {\r\n                el.document.body.setActive();\r\n                var r = el.document.selection.createRange()\r\n                r.moveToElementText(el.document.body);\r\n                r.move(\"character\", start);\r\n                r.moveEnd(\"character\", end - start);\r\n                r.select();\r\n            }\r\n        }\r\n        \r\n        self.getSelectionOffset = function (el) {\r\n            var off = { 'x': 0, 'y': 0, 'h': 0 };\r\n            if ('function' == typeof el.getSelection) {\r\n                var r = el.getSelection().getRangeAt(0)\r\n                    , s = el.document.createElement('span')\r\n                    , contents = r.cloneContents()\r\n                    , e = r.endOffset\r\n                    , n = s;\r\n\r\n                s.style.borderLeft = '1px solid red';\r\n                r.surroundContents(s);\r\n                off.h = n.offsetHeight;\r\n                while (n.offsetParent) {\r\n                    off.x += n.offsetLeft;\r\n                    off.y += n.offsetTop;\r\n                    n = n.offsetParent\r\n                }\r\n                s.parentNode.removeChild(s);\r\n\r\n                var r1 = el.document.createRange()\r\n                if (contents.childNodes.length > 0) {\r\n                    for (var i = 0; i < contents.childNodes.length; i++) {\r\n                        var n = contents.childNodes[i];\r\n                        r.insertNode(n);\r\n                        r1.selectNode(n);\r\n                    }\r\n                    el.getSelection().addRange(r1);\r\n                }\r\n            } else if (el.document && el.document.selection) {\r\n                var r = el.document.selection.createRange()\r\n                off.h = r.boundingHeight\r\n                off.x = r.offsetLeft;\r\n                off.y = r.offsetTop;\r\n            }\r\n            return off;\r\n        }\r\n    }\r\n};\r\n\r\nexport { DocumentSelection };\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/documentselection.js","import { isUndefined, isFunction, isString, isNumber, isNumeric, isArray, isRegExp, isBoolean, isScalar, isEmpty,\r\n    getScriptQuery } from './helpers';\r\n\r\n\r\n\r\nconst DOM = {};\r\n\r\nDOM.getParent = function getParent(el , cp , vl )  {\r\n  if (el == null) return null;\r\n  else if (el.nodeType == 1 &&\r\n      ((!isUndefined(vl) && el[cp] == vl) ||\r\n       ('string' == typeof cp && DOM.hasTagName(el, cp)) ||\r\n       el == cp)) return el;\r\n  else return getParent(el.parentNode, cp, vl); \r\n};\r\n\r\nDOM.getOffset = function (el )  {\r\n    var fixBrowserQuirks = true\r\n       ,o = el\r\n       ,left = 0\r\n       ,top = 0\r\n       ,width = 0\r\n       ,height = 0\r\n       ,parentNode = null\r\n       ,offsetParent = null;\r\n\r\n    if (o==null) return null;\r\n    \r\n    offsetParent = o.offsetParent;\r\n    var originalObject = o\r\n       ,el = o;\r\n    while (el.parentNode!=null) {\r\n      el = el.parentNode;\r\n      if (el.offsetParent!==null) {\r\n        var considerScroll = true;\r\n        \r\n        if (fixBrowserQuirks && window.opera) {\r\n          if (el==originalObject.parentNode || el.nodeName==\"TR\") {\r\n            considerScroll = false;\r\n          }\r\n        }\r\n        if (considerScroll) {\r\n          if (el.scrollTop && el.scrollTop>0) {\r\n            top -= el.scrollTop;\r\n          }\r\n          if (el.scrollLeft && el.scrollLeft>0) {\r\n            left -= el.scrollLeft;\r\n          }\r\n        }\r\n      }\r\n     \r\n      if (el == offsetParent) {\r\n        left += o.offsetLeft;\r\n        if (el.clientLeft && el.nodeName!=\"TABLE\") { \r\n          left += el.clientLeft;\r\n        }\r\n        top += o.offsetTop;\r\n        if (el.clientTop && el.nodeName!=\"TABLE\") {\r\n          top += el.clientTop;\r\n        }\r\n        o = el;\r\n        if (o.offsetParent==null) {\r\n          if (o.offsetLeft) {\r\n            left += o.offsetLeft;\r\n          }\r\n          if (o.offsetTop) {\r\n            top += o.offsetTop;\r\n          }\r\n        }\r\n        offsetParent = o.offsetParent;\r\n      }\r\n    }\r\n    \r\n  \r\n    if (originalObject.offsetWidth) {\r\n      width = originalObject.offsetWidth;\r\n    }\r\n    if (originalObject.offsetHeight) {\r\n      height = originalObject.offsetHeight;\r\n    }\r\n    \r\n    return {'x':left, 'y':top, 'width':width, 'height':height};\r\n};\r\n  \r\n\r\n\r\n\r\nDOM.getClientWidth = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document\r\n       ,w=0;\r\n    if (win.innerWidth) w = win.innerWidth;\r\n    else if (doc.documentElement && doc.documentElement.clientWidth) w = doc.documentElement.clientWidth;\r\n    else if (doc.body) w = doc.body.clientWidth;\r\n    return w;\r\n};\r\n\r\nDOM.getOffsetWidth = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document\r\n       ,w=0;\r\n    if (win.outerWidth) w = win.outerWidth;\r\n    else if (doc.documentElement && doc.documentElement.clientWidth) w = doc.documentElement.clientWidth;\r\n    else if (doc.body) w = doc.body.clientWidth;\r\n    return w;\r\n};\r\n\r\nDOM.getClientHeight = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document\r\n       ,h=0;\r\n    if (win.innerHeight) h = win.innerHeight;\r\n    else if (doc.documentElement && doc.documentElement.clientHeight) h = doc.documentElement.clientHeight;\r\n    else if (doc.body) h = doc.body.clientHeight;\r\n    return h;\r\n};\r\n\r\nDOM.getOffsetHeight = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document\r\n       ,h=0;\r\n    if (win.outerHeight) h = win.outerHeight;\r\n    else if (doc.documentElement && doc.documentElement.clientHeight) h = doc.documentElement.clientHeight;\r\n    else if (doc.body) h = doc.body.clientHeight;\r\n    return h;\r\n};\r\n\r\nDOM.getBodyScrollTop = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document;\r\n    return win.pageYOffset || (doc.documentElement && doc.documentElement.scrollTop) || (doc.body && doc.body.scrollTop);\r\n};\r\n\r\nDOM.getBodyScrollLeft = function (el) {\r\n    var win = this.getWindow(el)\r\n       ,doc = win.document;\r\n    return win.pageXOffset || (doc.documentElement && doc.documentElement.scrollLeft) || (doc.body && doc.body.scrollLeft);\r\n};\r\n\r\nDOM.getWindow = function (el) {\r\n    var win = window;\r\n    if (el) {\r\n        var doc = el.ownerDocument;\r\n        win = doc.defaultView || doc.parentWindow || doc.window || window;\r\n    }\r\n    return win;\r\n}\r\n\r\n\r\nDOM.getCursorPosition = function (e) {\r\n    if (e.pageX || e.pageY) return {'x': e.pageX, 'y': e.pageY};\r\n    \r\n    var de = document.documentElement || document.body;\r\n    return {'x': e.clientX + de.scrollLeft - (de.clientLeft || 0)\r\n           ,'y': e.clientY + de.scrollTop - (de.clientTop || 0)};\r\n};\r\n\r\nDOM.hasTagName = function (prop , tags ) {\r\n    if (isString(tags)) tags = [tags];\r\n    if (!isArray(tags) || isEmpty(tags) || isUndefined(prop) || isEmpty(prop.tagName)) return false;\r\n    var t = prop.tagName.toLowerCase();\r\n    for (var i=0, tL=tags.length; i<tL; i++) {\r\n        if (tags[i].toLowerCase() == t) return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nDOM.color2rgb = function (prop) {\r\n    var e;\r\n    \r\n    if (/^([a-z]+)($|\\s[a-z]+)/i.test(prop)) {\r\n        var d = document.body, ov = d.vLink;\r\n        d.vLink = prop.split(\" \")[0];\r\n        prop = d.vLink;\r\n        d.vLink = ov;\r\n    }\r\n    try {\r\n        if (e = prop.match(/^#([\\da-f]{6})$/i)) {\r\n            return e=parseInt(e[1],16),[(e&0xff0000)>>16,(e&0xff00)>>8,(e&0xff)]\r\n        } else if (e = prop.match(/^#([\\da-f]{3})$/i)) {\r\n            return e=parseInt(e[1],16),[((e&0xf00)>>8)*0x11,((e&0xf0)>>4)*0x11,(e&0xf)*0x11];\r\n        } else\r\n            return (prop.match(/([\\d%]+)/g).splice(0,3).map(function(a){ return /%/.test(a)?(parseInt(a)*2.55).toFixed(0):parseInt(a)}))\r\n    } catch(err){\r\n        return;\r\n    }\r\n}\r\nDOM.setOpacity = function (el, opacity) {\r\n    if (el.style.opacity != opacity) {\r\n        el.style.opacity = \r\n        el.style.KhtmOpacity =\r\n        el.style.MozOpacity = opacity;\r\n        el.style.filter = \"alpha(opacity=\"+(opacity*100)+\")\";\r\n    }\r\n}\r\n\r\nDOM.CSS = function (el) {\r\n    var self = this\r\n    \r\n    self.addClass = function() {\r\n        var arg = isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);\r\n        self.removeClass(arg);\r\n        el.className = el.className+\" \"+Array.prototype.join.call(arg,\" \");\r\n        return self;\r\n    };\r\n    \r\n    self.removeClass = function removeClass() {\r\n        var arg = isArray(arguments[0])?arguments[0]:arguments;\r\n        if (!removeClass.cache) removeClass.cache = {}\r\n        var c = removeClass.cache\r\n        for (var i=0, aL=arg.length; i<aL; i++) {\r\n            if (!c.hasOwnProperty(arg[i])) c[arg[i]] = new RegExp(\"(^|\\\\s+)\"+arg[i]+\"(\\\\s+|$)\");\r\n            el.className = el.className.replace(c[arg[i]],\" \");\r\n        }\r\n        el.className=el.className.replace(/\\s{2,}/,\" \")\r\n        return self;\r\n    };\r\n    \r\n    self.hasClass = function(c) {\r\n        let re = new RegExp(\"(^|\\\\s+)\"+c+\"(\\\\s+|$)\");\r\n        return el.className.match(re,\" \"+c+\" \");\r\n    };\r\n    \r\n    self.getClass = function() {\r\n        return el.className;\r\n    }\r\n    \r\n    self.getClassValue = function(c) {\r\n        var vals = el.className.match(new RegExp(\"(^|\\\\s)\"+c+\":([^\\\\s]+)\"));\r\n    \r\n        return vals?((vals[2].indexOf(\":\")+1)?vals[2].split(\":\")\r\n                                             :vals[2])\r\n                   :null;\r\n    };\r\n    \r\n    self.getComputedStyle = function(prop) {\r\n        var y;\r\n        if (el.currentStyle)\r\n            y = prop?el.currentStyle[prop]:el.currentStyle;\r\n        else if (window.getComputedStyle) {\r\n            y = document.defaultView.getComputedStyle(el,null);\r\n            if (prop) y=y[prop];\r\n        } else {\r\n            y = null;\r\n        }\r\n        return y;\r\n    }\r\n    return this;\r\n};\r\n\r\nexport { DOM };\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/dom.js","import { isUndefined, isFunction, isString, isNumber, isNumeric, isArray, isRegExp, isBoolean, isScalar, isEmpty,\r\n    getScriptQuery } from './helpers';\r\nimport { DOM } from './dom';\r\n\r\n\r\nvar EM = new function () {\r\n    var self = this;\r\n    \r\n    var pool = [];\r\n    \r\n    var UID = 0;\r\n    \r\n    var keys = {\r\n        'UEID': '__eventManagerUniqueElementId'\r\n       \r\n    };\r\n    \r\n    \r\n    var rootEventHandler = function (e) {\r\n        unifyEvent(e);\r\n        var id = null\r\n            , hid = null\r\n            , el = e.target\r\n            , fe = true\r\n            , res = true;\r\n\r\n        if (!e.currentTarget || !(id = e.currentTarget[keys.UEID]) || !(hid = pool[id].handler[e.type])) return;\r\n\r\n        try {\r\n            for (var i = 0, hL = hid.length; i < hL; i++) if (isFunction(hid[i])) res = res && !(false === hid[i].call(e.currentTarget, e));\r\n        } catch (err) { setTimeout(function () { throw new Error(\"Event handler for [\" + e.type + \"] has failed with exception: \\\"\" + err.message + \"\\\"\"); }, 10) }\r\n\r\n        return res;\r\n    };\r\n    \r\n    var unloadEventHandler = function unloadEventHandler (e) {\r\n        for (var i = pool.length - 1, pid = null, el = null; i >= 0; i--) {\r\n            if (pool[i] && (el = (pid = pool[i]).node)) {\r\n                for (var z in pid.handler) {\r\n                    if (!pid.handler.hasOwnProperty(z)) continue;\r\n                    try {\r\n                        if (el.removeEventListener) {\r\n                            el.removeEventListener(z, pid.rootEHCaller ? pid.rootEHCaller : rootEventHandler, false);\r\n                        } else if (el.detachEvent) {\r\n                            el.detachEvent('on' + z, pid.rootEHCaller ? pid.rootEHCaller : rootEventHandler);\r\n                        }\r\n                    } catch (e) { }\r\n                    pid.handler[z].length = 0;\r\n                }\r\n            }\r\n            el = pid.node = null;\r\n        }\r\n        if (window.removeEventListener) {\r\n            window.removeEventListener(z, unloadEventHandler, false);\r\n        } else {\r\n            window.detachEvent('on' + z, unloadEventHandler);\r\n        }\r\n    };\r\n    \r\n    \r\n    var unifyEvent = function (e) {\r\n        var i = self.EU.length\r\n            , cur, cur1, k, init\r\n        while (i--) {\r\n            cur = self.EU[i];\r\n            if (cur[0].test(e.type)) {\r\n                k = cur[1].length;\r\n                init = null;\r\n                while (k--) {\r\n                    cur1 = cur[1][k];\r\n                    if ('init' == cur1[0]) init = cur1[1]\r\n                    else if (!e[cur1[0]]) e[cur1[0]] = cur1[1];\r\n                }\r\n                if (init) init.call(e);\r\n            }\r\n        }\r\n        if (!e.target && e.type != 'unload') e.target = e.srcElement;\r\n        return e;\r\n    };\r\n    \r\n    var getUEID = function (el, f) {\r\n        return el[keys.UEID] || (f && (el[keys.UEID] = ++UID));\r\n    };\r\n    \r\n    \r\n    self.addEventListener = function (el, et, h) {\r\n        if (!el || !isFunction(h)) return false;\r\n       \r\n        \r\n        var id = getUEID(el, true)\r\n            , pid = null\r\n            , hid = null;\r\n\r\n        \r\n        if (!pool[id]) {\r\n            pool[id] = {\r\n                'node': el\r\n                , 'handler': {}\r\n            }\r\n        };\r\n        pid = pool[id];\r\n        \r\n        if (!pid.handler.hasOwnProperty(et)) {\r\n            pid.handler[et] = [];\r\n            \r\n            if (el.addEventListener) {\r\n                el.addEventListener(et, rootEventHandler, false);\r\n            } else if (el.attachEvent) {\r\n                \r\n                pid.rootEHCaller = function (e) {\r\n                    e.currentTarget = pid.node;//pool[id].node;\r\n                    var res = rootEventHandler(e);\r\n                    e.currentTarget = null;\r\n                    return res;\r\n                };\r\n                el.attachEvent('on' + et, pid.rootEHCaller);\r\n            }\r\n        };\r\n        hid = pid.handler[et];\r\n        \r\n        if (hid.indexOf(h) == -1) {\r\n            hid[hid.length] = h;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    \r\n    self.addOneTimeEventListener = function (el, et, h) {\r\n       \r\n        self.addEventListener(el, et, function oneTimeEventHandler(e) {\r\n           \r\n            self.removeEventListener(el, e.type, oneTimeEventHandler);\r\n           \r\n            return h(e);\r\n        });\r\n    };\r\n\r\n    \r\n    self.removeEventListener = function (el, et, h) {\r\n        if (!el || !isFunction(h)) return false;\r\n        var id = getUEID(el)\r\n            , pid = pool[id]\r\n            , eid = null;\r\n        if (pid && (eid = pid.handler[et])) {\r\n            \r\n            eid.splice(eid.indexOf(h), 1);\r\n            if (0 == eid.length) {\r\n                delete pid.handler[et];\r\n                \r\n                if (el.removeEventListener) {\r\n                    el.removeEventListener(et, pid.rootEHCaller ? pid.rootEHCaller : rootEventHandler, false);\r\n                } else if (el.detachEvent) {\r\n                    el.detachEvent('on' + et, pid.rootEHCaller ? pid.rootEHCaller : rootEventHandler);\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    \r\n    self.dispatchEvent = function (e) {\r\n        var res = rootEventHandler(e);\r\n        return res;\r\n    };\r\n    \r\n    self.registerEvent = function (o, n, b, d) {\r\n        var id = getUEID(o, true);\r\n        if (!pool[id]) {\r\n            pool[id] = {\r\n                'node': o,\r\n                'handler': []\r\n            };\r\n        } else {\r\n            pool[id].node = o;\r\n        }\r\n        return new EM.EventTarget(o, n, b, d);\r\n    };\r\n    \r\n    var __construct = function () {\r\n        \r\n        if (window.attachEvent && !window.addEventListener) {\r\n            window.attachEvent('onunload', unloadEventHandler);\r\n        }\r\n    };\r\n    __construct();\r\n};\r\n\r\nEM.preventDefaultAction = function (e) {\r\n    e.preventDefault();\r\n}\r\nEM.stopPropagationAction = function (e) {\r\n    e.stopPropagation();\r\n}\r\n\r\n\r\n\r\nEM.EventTarget = function (obj, name, bubble, def) {\r\n    var self = this;\r\n\r\n    \r\n    var canBubble = !!bubble;\r\n    \r\n    var defaultAction = isFunction(def) ? def : null;\r\n    \r\n    \r\n    \r\n    self.trigger = function (el, data) {\r\n        if (!(arguments.length - 1) && el != obj) {\r\n            data = el;\r\n            el = null;\r\n        }\r\n        if (!el) el = obj;\r\n        var e = {}\r\n            , res = true\r\n            , undef = true\r\n            , tmp = null\r\n        for (var i in data) {\r\n            if (data.hasOwnProperty(i)) e[i] = data[i];\r\n        }\r\n\r\n        \r\n        canBubble = !!bubble;\r\n        defaultAction = def;\r\n\r\n        \r\n        do {\r\n            e.preventDefault = preventDefault;\r\n            e.stopPropagation = stopPropagation;\r\n            e.target = el;\r\n            e.currentTarget = el;\r\n            e.type = name;\r\n            tmp = EM.dispatchEvent(e);\r\n            undef &= (isUndefined(tmp))\r\n            res &= !(false === tmp);\r\n        } while ((el = el.parentNode) && canBubble);\r\n        \r\n        if (isFunction(defaultAction) && res && !undef) {\r\n            defaultAction(e);\r\n        }\r\n        return (defaultAction && res && !undef);\r\n    };\r\n    \r\n    var preventDefault = function () {\r\n        defaultAction = null;\r\n    };\r\n    \r\n    var stopPropagation = function () {\r\n        canBubble = false;\r\n    };\r\n};\r\n\r\nEM.EU = [\r\n    [/./, [\r\n        \r\n        ['preventDefault', function () {\r\n            this.returnValue = false;\r\n        }\r\n        ]\r\n        \r\n        , ['stopPropagation', function () {\r\n            this.cancelBubble = true;\r\n        }\r\n        ]\r\n    ]]\r\n    , [/^mouse(over|out|down|up)/, [\r\n        \r\n        ['getButton', function () {\r\n            return this.button == 2 ? 2 : 1\r\n        }\r\n        ]\r\n        , ['EM_MB_LEFT', '1']\r\n        , ['EM_MB_RIGHT', '2']\r\n    ]]\r\n    , [/^key(down|up|press)/, [\r\n        \r\n        ['getKeyCode', function () {\r\n            switch (this.keyCode) {\r\n                case 189: return 109;\r\n                case 187: return 61; \r\n                case 107: return 61; \r\n                case 186: return 59;\r\n                default: return this.keyCode;\r\n            }\r\n        }\r\n        ]\r\n        \r\n        , ['getRepeat', function getRepeat() {\r\n            return getRepeat.repeat\r\n        }\r\n        ]\r\n        , ['init', function () {\r\n            var ac = this.getRepeat\r\n            if ('keyup' == this.type) {\r\n                ac.repeat = 0;\r\n                ac.keyCode = 0;\r\n            } else if ('keydown' == this.type) {\r\n                ac.repeat = ac.keyCode == this.keyCode;\r\n                ac.keyCode = this.keyCode;\r\n            }\r\n        }\r\n        ]\r\n    ]]\r\n\r\n];\r\n\r\n\r\n(function () {\r\n\r\n    var evt = EM.registerEvent(window, 'domload')\r\n        , executed = false\r\n        , clearEvents = function () {\r\n           \r\n            EM.removeEventListener(document, 'propertychange', handlers.ie);\r\n           \r\n            EM.removeEventListener(document, 'DOMContentLoaded', handlers.mz);\r\n           \r\n            EM.removeEventListener(window, 'load', handlers.mz);\r\n        }\r\n        , handlers = {\r\n            'ie': function (e) {\r\n                if (window.event.propertyName == 'activeElement' && !executed) {\r\n                    evt.trigger(window);\r\n                    clearEvents();\r\n                    executed = true;\r\n                }\r\n            }\r\n            , 'mz': function (e) { if (!executed) evt.trigger(window); executed = true; }\r\n        };\r\n\r\n   \r\n    EM.addEventListener(document, 'propertychange', handlers.ie);\r\n   \r\n    EM.addEventListener(document, 'DOMContentLoaded', handlers.mz);\r\n   \r\n    if (/WebKit|Khtml/i.test(navigator.userAgent) || (window.opera && parseInt(window.opera.version()) < 9))\r\n        (function argumentsCalleeFixFn() { if (!executed) /loaded|complete/.test(document.readyState) ? (evt.trigger(window), executed = true) : setTimeout(argumentsCalleeFixFn, 100) })();\r\n   \r\n    EM.addEventListener(window, 'load', handlers.mz);\r\n})();\r\n\r\nexport { EM };\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/eventmanager.js","var IME = new function () {\n    var self = this;\n    var html = \"<div id=\\\"VirtualKeyboardIME\\\"><table><tr><td class=\\\"IMEControl\\\"><div class=\\\"left\\\"><!-- --></div></td>\"\n        + \"<td class=\\\"IMEControl IMEContent\\\"></td>\"\n        + \"<td class=\\\"IMEControl\\\"><div class=\\\"right\\\"><!-- --></div></td></tr>\"\n        + \"<tr><td class=\\\"IMEControl IMEInfo\\\" colspan=\\\"3\\\"><div class=\\\"showAll\\\"><div class=\\\"IMEPageCounter\\\"></div><div class=\\\"arrow\\\"></div></div></td></tr></div>\";\n    var ime = null;\n    var chars = \"\";\n    var page = 0;\n    var showAll = false;\n    var sg = [];\n    var target = null;\n    var targetWindow = null;\n\n        self.show = function (s) {\n        target = VirtualKeyboard.getAttachedInput();\n        var win = DOM.getWindow(target);\n                if (targetWindow != win) {\n            if (ime && ime.parentNode) {\n                ime.parentNode.removeChild(ime);\n            }\n            targetWindow = win;\n            __createImeToolbar();\n            targetWindow.document.body.appendChild(ime);\n        }\n                ime.className = self.css\n\n        if (s) self.setSuggestions(s);\n        if (target && ime && sg.length > 0) {\n            EM.addEventListener(target, 'blur', self.blurHandler);\n            ime.style.display = \"block\";\n            self.updatePosition(target);\n        } else if ('none' != ime.style.display) {\n            self.hide();\n        }\n    }\n\n        self.hide = function (keep) {\n        if (ime && 'none' != ime.style.display) {\n            ime.style.display = \"none\";\n            EM.removeEventListener(target, 'blur', self.blurHandler);\n            if (target && DocumentSelection.getSelection(target) && !keep)\n                DocumentSelection.deleteSelection(target);\n            target = null;\n            sg = [];\n        }\n    }\n        self.updatePosition = function () {\n        var xy = DOM.getOffset(target);\n        ime.style.left = xy.x + 'px';\n        var co = DocumentSelection.getSelectionOffset(target);\n        ime.style.top = xy.y + co.y + co.h + 'px';\n    }\n        self.setSuggestions = function (arr) {\n        if (!isArray(arr)) return false;\n        sg = arr;\n        page = 0;\n        showPage();\n        self.updatePosition(target);\n    }\n        self.getSuggestions = function (idx) {\n        return isNumber(idx) ? sg[idx] : sg;\n    }\n        self.nextPage = function (e) {\n        page = Math.max(Math.min(page + 1, (Math.ceil(sg.length / 10)) - 1), 0);\n        showPage();\n    }\n        self.prevPage = function (e) {\n        page = Math.max(page - 1, 0);\n        showPage();\n    }\n        self.getPage = function () {\n        return page;\n    }\n        self.getChar = function (n) {\n        n = --n < 0 ? 9 : n;\n        return sg[self.getPage() * 10 + n]\n    }\n    self.isOpen = function () {\n        return ime && 'block' == ime.style.display;\n    }\n        self.blurHandler = function (e) {\n        self.hide();\n    }\n        self.toggleShowAll = function (e) {\n        var sa = ime.firstChild.rows[1].cells[0].lastChild;\n        if (showAll = !showAll) {\n            page = 0;\n            sa.className = 'showPage';\n        } else {\n            sa.className = 'showAll';\n        }\n        showPage();\n    }\n        var showPage = function () {\n        var s = ['<table>'];\n        for (var z = 0, pL = Math.ceil(sg.length / 10); z < pL; z++) {\n            if (showAll || z == page) {\n                s.push('<tr>');\n                for (var i = 0, p = z * 10; i < 10 && !isUndefined(sg[p + i]); i++) {\n                    s.push(\"<td><a href=''>\")\n                    if (z == page) {\n                        s.push(\"<b>&nbsp;\" + ((i + 1) % 10) + \": </b>\");\n                    } else {\n                        s.push(\"<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>\");\n                    }\n                    s.push(sg[p + i] + \"</a></td>\");\n                }\n                s.push('</tr>');\n            }\n        }\n        s.push('</table>');\n        ime.firstChild.rows[0].cells[1].innerHTML = s.join(\"\");\n       \n        ime.firstChild.rows[1].cells[0].firstChild.firstChild.innerHTML = (page + 1) + \"/\" + (0 + showAll || Math.ceil(sg.length / 10));\n       \n        var els = ime.getElementsByTagName(\"*\");\n        for (var i = 0, eL = els.length; i < eL; i++) {\n            els[i].unselectable = \"on\";\n        }\n    }\n        var pasteSuggestion = function (e) {\n        var el = DOM.getParent(e.target, 'a');\n        if (el) {\n            DocumentSelection.insertAtCursor(target, el.lastChild.nodeValue);\n            self.hide();\n        }\n        e.preventDefault();\n    }\n\n        var __createImeToolbar = function () {\n        var el = targetWindow.document.createElement('div');\n        el.innerHTML = html;\n        ime = el.firstChild;\n        ime.style.display = 'none';\n        var arrl = ime.firstChild.rows[0].cells[0]\n            , arrr = ime.firstChild.rows[0].cells[2]\n            , arrd = ime.firstChild.rows[1].cells[0].lastChild\n        EM.addEventListener(arrl, 'mousedown', self.prevPage);\n        EM.addEventListener(arrl, 'mousedown', EM.preventDefaultAction);\n        EM.addEventListener(arrl, 'mousedown', EM.stopPropagationAction);\n        EM.addEventListener(arrr, 'mousedown', self.nextPage);\n        EM.addEventListener(arrr, 'mousedown', EM.preventDefaultAction);\n        EM.addEventListener(arrr, 'mousedown', EM.stopPropagationAction);\n        EM.addEventListener(arrd, 'mousedown', self.toggleShowAll);\n        EM.addEventListener(arrd, 'mousedown', EM.preventDefaultAction);\n        EM.addEventListener(arrd, 'mousedown', EM.stopPropagationAction);\n                ime.unselectable = \"on\";\n        var els = ime.getElementsByTagName(\"*\");\n        for (var i = 0, eL = els.length; i < eL; i++) {\n            els[i].unselectable = \"on\";\n        }\n\n        EM.addEventListener(ime, 'mousedown', pasteSuggestion);\n    }\n};\n\nexport { IME };\n\n\n// WEBPACK FOOTER //\n// ./src/ime.js","\n\n\n\n\n\n\n\nvar __GCC__ECMA_SCRIPT_SHIMS__ = false;\n\n\n\nvar __GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ = true;\n\n\n\n\nif( !function( global ) {\n\ttry {\n\t\treturn (new global[\"KeyboardEvent\"]( \"keyup\", {\"key\": \"a\"} ))[\"key\"] == \"a\";\n\t}\n\tcatch ( __e__ ) {\n\t\treturn false;\n\t}\n}( this ) )void function( ) {\n\n\tvar global = this\n\n\t\t, _DOM_KEY_LOCATION_STANDARD = 0x00\n\t\t, _DOM_KEY_LOCATION_LEFT = 0x01\n\t\t, _DOM_KEY_LOCATION_RIGHT = 0x02\n\t\t, _DOM_KEY_LOCATION_NUMPAD = 0x03\n\t\t, _DOM_KEY_LOCATION_MOBILE = 0x04\n\t\t, _DOM_KEY_LOCATION_JOYSTICK = 0x05\n\n\t\t, _Event_prototype = global[\"Event\"].prototype\n\n\t\t, _KeyboardEvent_prototype = global[\"KeyboardEvent\"] && global[\"KeyboardEvent\"].prototype || _Event_prototype\n\n\t\t, _Event_prototype__native_key_getter\n\n\t\t, _Event_prototype__native_char_getter\n\n\t\t, _Event_prototype__native_location_getter\n\n\t\t, _Event_prototype__native_keyCode_getter\n\n\t\t, _Object_defineProperty = Object.defineProperty || function(obj, prop, val) {\n\t\t\tif( \"value\" in val ) {\n\t\t\t\tobj[prop] = val[\"value\"];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif( \"get\" in val ) {\n\t\t\t\tobj.__defineGetter__(prop, val[\"get\"]);\n\t\t\t}\n\t\t\tif( \"set\" in val ) {\n\t\t\t\tobj.__defineSetter__(prop, val[\"set\"]);\n\t\t\t}\n\t\t}\n\n\t\t, _Object_getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor\n\n\t\t, getObjectPropertyGetter = function( obj, prop ) {\n\t\t\t\t\t\treturn \"__lookupGetter__\" in obj ?\n\t\t\t\tobj.__lookupGetter__( prop ) :\n\t\t\t\t_Object_getOwnPropertyDescriptor ? (_Object_getOwnPropertyDescriptor( obj, prop ) || {})[\"get\"] : void 0\n\t\t\t;\n\t\t}\n\n\t\t, KEYBOARD_EVENTS = {\n\t\t\t\"keydown\": null,\n\t\t\t\"keyup\": null,\n\t\t\t\"keypress\": null\n\t\t}\n\t\t, UUID = 1\n\t\t\t\t, _event_handleUUID = \"_h_9e2\"\n\t\t\t\t, _event_eventsUUID = \"_e_8vj\"\n\t\t\t\t, _shim_event_keyCodeUUID = _event_handleUUID + \"__keyCode\"\n\n\t\t, _keyboardEvent_properties_dictionary = {\n\t\t\t\"char\": \"\",\n\t\t\t\"key\": \"\",\n\t\t\t\"location\": _DOM_KEY_LOCATION_STANDARD,\n\t\t\t\"ctrlKey\": false,\n\t\t\t\"shiftKey\": false,\n\t\t\t\"altKey\": false,\n\t\t\t\"metaKey\": false,\n\t\t\t\"repeat\": false,\n\t\t\t\"locale\": \"\",\n\n\t\t\t\"detail\": 0,\n\t\t\t\"bubbles\": false,\n\t\t\t\"cancelable\": false\n\t\t}\n\n\t\t\t\t, _Event_has_stopImmediatePropagation = \"stopImmediatePropagation\" in document.createEvent( \"Event\" )\n\n\t\t\t\t, _Array_slice = Array.prototype.slice\n\n\t\t\t\t, _unSafeBind = Function.prototype.bind || function( object, var_args ) {\n\t\t\tvar __method = this\n\t\t\t\t, args = _Array_slice.call( arguments, 1 )\n\t\t\t;\n\t\t\treturn function() {\n\t\t\t\treturn __method.apply( object, args.concat( _Array_slice.call( arguments ) ) );\n\t\t\t}\n\t\t}\n\n\t\t\t\t, _hasOwnProperty = _unSafeBind.call( Function.prototype.call, Object.prototype.hasOwnProperty )\n\n\t\t, _try_initKeyboardEvent = true\n\n\t\t, _getter_KeyboardEvent_location\n\n\t\t, _initKeyboardEvent_type = (function( _createEvent ) {\n\t\t\ttry {\n\t\t\t\tvar e = _createEvent.call(document,  \"KeyboardEvent\" );//Old browsers unsupported \"KeyboardEvent\"\n\n\t\t\t\te.initKeyboardEvent(\n\t\t\t\t\t\"keyup\"\n\t\t\t\t\t, false\n\t\t\t\t\t, false\n\t\t\t\t\t, global\n\t\t\t\t\t, \"+\"\n\t\t\t\t\t, 3\n\t\t\t\t\t, true\n\t\t\t\t\t, false\n\t\t\t\t\t, true\n\t\t\t\t\t, false\n\t\t\t\t\t, false\n\t\t\t\t);\n\t\t\t\treturn ((e[\"keyIdentifier\"] || e[\"key\"]) == \"+\" && (e[\"keyLocation\"] || e[\"location\"]) == 3) && (\n\t\t\t\t\te.ctrlKey ?\n\t\t\t\t\t\te.altKey ?\n\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t3\n\t\t\t\t\t\t:\n\t\t\t\t\t\te.shiftKey ?\n\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t4\n\t\t\t\t\t)\n\t\t\t\t\t|| (e[\"char\"] == \"+\") && 5\n\t\t\t\t\t|| 9\n\t\t\t\t;\n\t\t\t}\n\t\t\tcatch ( __e__ ) {\n\t\t\t\treturn 0\n\t\t\t}\n\t\t})( document.createEvent )\n\n\t\t, canOverwrite_keyCode\n\n\t\t, canOverwrite_which\n\n\t\t, testKeyboardEvent = function() {\n\t\t\ttry {\n\t\t\t\treturn this && new this( \"keyup\", {\"key\": \"a\", \"char\": \"b\"} ) || {}\n\t\t\t} catch ( e ) {\n\t\t\t\treturn {}\n\t\t\t}\n\t\t}.call( global[\"KeyboardEvent\"] )\n\n\t\t, newKeyboadrEvent_key_property_proposal__getKey_\n\n\t\t, __Property_descriptor__ = {\n\t\t\t\"enumerable\": false\n\t\t\t, \"configurable\": true\n\t\t\t, \"writable\": true\n\t\t}\n\t;\n\n\tif( _Object_getOwnPropertyDescriptor ) {//Modern browser\n\t\n\t\t_Event_prototype__native_key_getter = getObjectPropertyGetter( _KeyboardEvent_prototype, \"key\" ) || getObjectPropertyGetter( testKeyboardEvent, \"key\" );\n\t\n\t\t_Event_prototype__native_char_getter = getObjectPropertyGetter( _KeyboardEvent_prototype, \"char\" ) || getObjectPropertyGetter( testKeyboardEvent, \"char\" );\n\t\n\t\t_Event_prototype__native_location_getter = getObjectPropertyGetter( _KeyboardEvent_prototype, \"location\" ) || getObjectPropertyGetter( testKeyboardEvent, \"location\" );\n\t\n\t\t_Event_prototype__native_keyCode_getter = getObjectPropertyGetter( _KeyboardEvent_prototype, \"keyCode\" );\n\t}\n\n\t\tvar\n\t\t\tVK__NON_CHARACTER_KEYS = {\n\t\t\t3: 'Cancel',\n\t\t\t6: 'Help',\n\t\t\t8: 'Backspace',\n\t\t\t9: 'Tab',\n\t\t\t12: 'Clear',\n\t\t\t13: 'Enter',\n\n\t\t\t16: 'Shift',\n\t\t\t17: 'Control',\n\t\t\t18: 'Alt',\n\t\t\t19: 'Pause',\n\t\t\t20: 'CapsLock',\n\n\t\t\t21: 'KanaMode',\n\t\t\t22: 'HangulMode',\n\t\t\t23: 'JunjaMode',\n\t\t\t24: 'FinalMode',\n\t\t\t25: 'HanjaMode',\n\t\t\n\n\t\t\t27: 'Esc',\n\n\t\t\t28: 'Convert',\n\t\t\t29: 'Nonconvert',\n\t\t\t30: 'Accept',\n\t\t\t31: 'ModeChange',\n\n\t\t\t32: 'Spacebar',\n\t\t\t33: 'PageUp',\n\t\t\t34: 'PageDown',\n\t\t\t35: 'End',\n\t\t\t36: 'Home',\n\t\t\t37: 'Left',\n\t\t\t38: 'Up',\n\t\t\t39: 'Right',\n\t\t\t40: 'Down',\n\t\t\t41: 'Select',\n\t\t\n\t\t\t43: 'Execute',\n\t\t\t44: 'PrintScreen',\n\t\t\t45: 'Insert',\n\t\t\t46: 'Del',\n\t\t\t47: 'Help',\n\n\t\t\t91: { _key: 'OS', _char: false, _location: _DOM_KEY_LOCATION_LEFT },\n\t\t\t92: { _key: 'OS', _char: false, _location: _DOM_KEY_LOCATION_RIGHT },\n\t\t\t93: 'Menu',\n\n\t\t\n\t\t\t106: { _key: 'Multiply', _char: '*', _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t107: { _key: 'Add', _char: '+', _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t108: { _key: 'Separator', _char: false, _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t109: { _key: 'Subtract', _char: '-', _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t110: { _key: 'Decimal', _char: '.', _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t111: { _key: 'Divide', _char: '/', _location: _DOM_KEY_LOCATION_NUMPAD },\n\n\t\t\n\t\t\t144: { _key: 'NumLock', _char: false, _location: _DOM_KEY_LOCATION_NUMPAD },\n\t\t\t145: 'ScrollLock',\n\n\t\t\n\t\t\t\t\t\t180: 'LaunchMail',\n\t\t\t181: 'SelectMedia',\n\t\t\t182: 'LaunchApplication1',\n\t\t\t183: 'LaunchApplication2',\n\n\t\t\n\t\t\t224: 'Meta',\n\t\t\t229: 'Process',\n\n\t\t\t246: 'Attn',\n\t\t\t247: 'Crsel',\n\t\t\t248: 'Exsel',\n\t\t\t249: 'EraseEof',\n\t\t\t251: 'Zoom',\n\t\t\t254: 'Clear'\n\t\t}\n\t\t, VK__CHARACTER_KEYS__DOWN_UP = __GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ ?\n\t\t{\n\t\t\t186: ';'// 'ж', ';', ':'\n\t\t\t, 187: '='\n\t\t\t, 188: ','// 'б', ',', '<'\n\t\t\t, 189: '-'\n\t\t\t, 190: '.'// 'ю', '.', '>'\n\t\t\t, 191: '/'// '.', '/', '?'\n\t\t\t, 192: '`'// 'ё', '`', '~'\n\t\t\t, 219: '['// 'х', '[', '{'\n\t\t\t, 220: '\\\\'//'\\', '\\', '|'\n\t\t\t, 221: ']'// 'ъ', '[', '{'\n\t\t\t, 222: \"'\"// 'э', '\"', '''\n\t\t\t, 226: '\\\\'// '\\', '|', '/'\n\t\t}\n\t\t: { }\n\t\t, _userAgent_ = global.navigator.userAgent.toLowerCase()\n\t\t, _IS_MAC = !!~(global.navigator.platform + \"\").indexOf( \"Mac\" )\n\t\t, _BROWSER = {}\n\t\t, __i\n\t\t\t\t, IS_NEED_KEYCODE_BUGFIX\n\t\t\t\t, IS_OPERA_DOUBBLE_KEYPRESS_BUG\n\t\t, tmp\n\t\t\t\t, _KEYPRESS_VK__CHARACTER_KEYS__DOWN_UP_DELTA = 999\n\t;\n\n\tfor( __i = 105 ; __i > 95 ; --__i ) {\n\t\n\t\ttmp = __i - 96;\n\t\tVK__CHARACTER_KEYS__DOWN_UP[tmp + 48] = _Event_prototype__native_key_getter ? tmp + \"\" : {_key : tmp + \"\"};//48, 49, 50 ... 57\n\n\t\n\t\tVK__CHARACTER_KEYS__DOWN_UP[__i] = { _key: tmp + \"\", _location: _DOM_KEY_LOCATION_NUMPAD };//96, 97, 98 .. 105\n\t}\n\n\tif( !_Event_prototype__native_key_getter ) {\n\t\tfor(__i in VK__CHARACTER_KEYS__DOWN_UP) if(_hasOwnProperty(VK__CHARACTER_KEYS__DOWN_UP, __i) && typeof(VK__CHARACTER_KEYS__DOWN_UP[__i]) != \"object\") {\n\t\t\tVK__CHARACTER_KEYS__DOWN_UP[__i] = {_key: VK__CHARACTER_KEYS__DOWN_UP[__i]};\n\t\t}\n\t}\n\n\n\tfor( __i = 135 ; __i > 111 ; --__i ) {\n\t\tVK__NON_CHARACTER_KEYS[__i] = \"F\" + (__i - 111);\n\t}\n\n\tif( global[\"opera\"] ) {// Opera special cases\n\t\tif( !_Event_prototype__native_char_getter ) {\n\t\t\n\t\t\tIS_NEED_KEYCODE_BUGFIX = true;\n\t\t\tIS_OPERA_DOUBBLE_KEYPRESS_BUG = true;//TODO:: avoid Opera double keypress bug\n\n\t\t\t\t\t\tVK__NON_CHARACTER_KEYS[57351] = VK__NON_CHARACTER_KEYS[93];\n\t\t\tVK__CHARACTER_KEYS__DOWN_UP[187] = VK__CHARACTER_KEYS__DOWN_UP[61] = {_key: 0, _keyCode: 187};\n\t\t\tVK__CHARACTER_KEYS__DOWN_UP[189] = VK__CHARACTER_KEYS__DOWN_UP[109] = {_key: 0, _keyCode: 189, _location: 3};//TODO: location=3 only for win?\n\t\t\t\t\t\tif( _IS_MAC ) {\n\t\t\t\t\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\n\t\t_BROWSER[\"names\"] = _userAgent_.match( /(mozilla|compatible|chrome|webkit|safari)/gi );\n\t\t__i = _BROWSER[\"names\"] && _BROWSER[\"names\"].length || 0;\n\t\twhile( __i-- > 0 )_BROWSER[_BROWSER[\"names\"][__i]] = true;\n\n\t\tif( _BROWSER[\"mozilla\"] && !_BROWSER[\"compatible\"] && !_BROWSER[\"webkit\"] ) {// Mozilla special cases\n\t\t\n\t\t\tIS_NEED_KEYCODE_BUGFIX = true;\n\n\t\t\n\t\t\t_BROWSER._version = +(_userAgent_.match( /firefox\\/([0-9]+)/ ) || [])[1];\n\n\t\t\ttmp = VK__CHARACTER_KEYS__DOWN_UP[61] = VK__CHARACTER_KEYS__DOWN_UP[187];//US Standard\n\t\t\ttmp._keyCode = 187;\n\t\t\ttmp = VK__CHARACTER_KEYS__DOWN_UP[173] = VK__CHARACTER_KEYS__DOWN_UP[189];//US Standard\n\t\t\ttmp._keyCode = 189;\n\t\t\ttmp = VK__CHARACTER_KEYS__DOWN_UP[59] = VK__CHARACTER_KEYS__DOWN_UP[186];//US Standard\n\t\t\ttmp._keyCode = 186;\n\t\t\tif( _BROWSER._version < 15 ) {\n\t\t\t\tVK__NON_CHARACTER_KEYS[107] = VK__NON_CHARACTER_KEYS[61];\n\t\t\t\tVK__CHARACTER_KEYS__DOWN_UP[109] = VK__CHARACTER_KEYS__DOWN_UP[173];\n\n\t\t\t\n\t\t\t}\n\t\t}\n\t\telse if( _BROWSER[\"safari\"] && !_BROWSER[\"chrome\"] ) {// Safari WebKit special cases\n\t\t\t\t\t\tif( _IS_MAC ) {\n\t\t\t\t\t\t\t}\n\t\t}\n\t\telse if( _BROWSER[\"chrome\"] ) {// Chrome WebKit special cases\n\t\t\tif( _IS_MAC ) {\n\t\t\t\t\t\t\t}\n\t\t}\n\t}\n\n\tvar VK__FAILED_KEYIDENTIFIER = {//webkit 'keyIdentifier' or Opera12.10/IE9 'key'\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\n\t\t'Escape': null,\n\t\t'Win': null,\n\t\t'Scroll': null,\n\t\t'Apps': null,\n\n\t\n\t\t'Delete': null,\n\t\t'Window': null,\n\t\t'ContextMenu': null,\n\t\t'Mul': null\n\t\t\t\t\t\t\t};\n\n\n\n\n\n\t\n\t\tfunction _KeyboardEvent ( type, dict ) {// KeyboardEvent  constructor\n\t\tvar e;\n\t\ttry {\n\t\t\te = document.createEvent( \"KeyboardEvent\" );\n\t\t}\n\t\tcatch ( err ) {\n\t\t\te = document.createEvent( \"Event\" );\n\t\t}\n\n\t\tdict = dict || {};\n\n\t\tvar localDict = {}\n\t\t\t, _prop_name\n\t\t\t, _prop_value\n\t\t;\n\n\t\tfor( _prop_name in _keyboardEvent_properties_dictionary )if( _hasOwnProperty( _keyboardEvent_properties_dictionary, _prop_name ) ) {\n\t\t\tlocalDict[_prop_name] = _prop_name in dict && (_prop_value = dict[_prop_name]) !== void 0 ?\n\t\t\t\t_prop_value\n\t\t\t\t:\n\t\t\t\t_keyboardEvent_properties_dictionary[_prop_name]\n\t\t\t;\n\t\t}\n\n\t\tvar _ctrlKey = localDict[\"ctrlKey\"] || false\n\t\t\t, _shiftKey = localDict[\"shiftKey\"] || false\n\t\t\t, _altKey = localDict[\"altKey\"] || false\n\t\t\t, _metaKey = localDict[\"metaKey\"] || false\n\t\t\t, _altGraphKey = localDict[\"altGraphKey\"] || false\n\n\t\t\t, modifiersListArg = _initKeyboardEvent_type > 3 ? (\n\t\t\t\t\t(_ctrlKey ? \"Control\" : \"\")\n\t\t\t\t\t+ (_shiftKey ? \" Shift\" : \"\")\n\t\t\t\t\t+ (_altKey ? \" Alt\" : \"\")\n\t\t\t\t\t+ (_metaKey ? \" Meta\" : \"\")\n\t\t\t\t\t+ (_altGraphKey ? \" AltGraph\" : \"\")\n\t\t\t\t).trim() : null\n\n\t\t\t, _key = (localDict[\"key\"] || \"\") + \"\"\n\t\t\t, _char = (localDict[\"char\"] || \"\") + \"\"\n\t\t\t, _location = localDict[\"location\"]\n\t\t\t, _keyCode = _key && _key.charCodeAt( 0 ) || 0\n\n\t\t\t, _bubbles = localDict[\"bubbles\"]\n\t\t\t, _cancelable = localDict[\"cancelable\"]\n\n\t\t\t, _repeat = localDict[\"repeat\"]\n\t\t\t, _locale = localDict[\"locale\"]\n\n\t\t\t, success_init = false\n\t\t;\n\n\t\t_keyCode = localDict[\"keyCode\"] = localDict[\"keyCode\"] || _keyCode;\n\t\tlocalDict[\"which\"] = localDict[\"which\"] || _keyCode;\n\n\t\tif( !canOverwrite_keyCode ) {//IE9\n\t\t\te[\"__keyCode\"] = _keyCode;\n\t\t\te[\"__charCode\"] = _keyCode;\n\t\t\te[\"__which\"] = _keyCode;\n\t\t}\n\n\n\t\tif( \"initKeyEvent\" in e ) {//FF\n\t\t\n\n\t\t\te.initKeyEvent( type, _bubbles, _cancelable, global,\n\t\t\t\t_ctrlKey, _altKey, _shiftKey, _metaKey, _keyCode, _keyCode );\n\t\t\tsuccess_init = true;\n\t\t}\n\t\telse if( \"initKeyboardEvent\" in e ) {\n\t\t\n\n\t\t\tif( _try_initKeyboardEvent ) {\n\t\t\t\ttry {\n\t\t\t\t\tif( _initKeyboardEvent_type == 1 ) {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _key, _location, _ctrlKey, _shiftKey, _altKey, _metaKey, _altGraphKey );\n\t\t\t\t\t\te[\"__char\"] = _char;\n\t\t\t\t\t}\n\t\t\t\t\telse if( _initKeyboardEvent_type == 2 ) {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _ctrlKey, _altKey, _shiftKey, _metaKey, _keyCode, _keyCode );\n\t\t\t\t\t}\n\t\t\t\t\telse if( _initKeyboardEvent_type == 3 ) {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _key, _location, _ctrlKey, _altKey, _shiftKey, _metaKey, _altGraphKey );\n\t\t\t\t\t\te[\"__char\"] = _char;\n\t\t\t\t\t}\n\t\t\t\t\telse if( _initKeyboardEvent_type == 4 ) {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _key, _location, modifiersListArg, _repeat, _locale );\n\t\t\t\t\t\te[\"__char\"] = _char;\n\t\t\t\t\t}\n\t\t\t\t\telse if( _initKeyboardEvent_type == 5 ) {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _char, _key, _location, modifiersListArg, _repeat, _locale );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\te.initKeyboardEvent( type, _bubbles, _cancelable, global, _key, _location, modifiersListArg, _repeat, _locale );\n\t\t\t\t\t}\n\t\t\t\t\tsuccess_init = true;\n\t\t\t\t}\n\t\t\t\tcatch ( __e__ ) {\n\t\t\t\t\t_try_initKeyboardEvent = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tif( !success_init ) {\n\t\t\te.initEvent( type, _bubbles, _cancelable, global );\n\t\t\te[\"__char\"] = _char;\n\t\t\te[\"__key\"] = _key;\n\t\t\te[\"__location\"] = _location;\n\t\t}\n\n\t\tfor( _prop_name in _keyboardEvent_properties_dictionary )if( _hasOwnProperty( _keyboardEvent_properties_dictionary, _prop_name ) ) {\n\t\t\tif( e[_prop_name] != localDict[_prop_name] ) {\n\t\t\t\tdelete e[_prop_name];\n\t\t\t\t_Object_defineProperty( e, _prop_name, { writable: true, \"value\": localDict[_prop_name] } );\n\t\t\t}\n\t\t}\n\n\t\tif( !(\"isTrusted\" in e) )e.isTrusted = false;\n\n\t\treturn e;\n\t}\n\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_STANDARD\"] = _DOM_KEY_LOCATION_STANDARD;\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_LEFT\"] = _DOM_KEY_LOCATION_LEFT;\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_RIGHT\"] = _DOM_KEY_LOCATION_RIGHT;\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_NUMPAD\"] = _DOM_KEY_LOCATION_NUMPAD;\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_MOBILE\"] = _DOM_KEY_LOCATION_MOBILE;\n\t_KeyboardEvent[\"DOM_KEY_LOCATION_JOYSTICK\"] = _DOM_KEY_LOCATION_JOYSTICK;\n\t_KeyboardEvent.prototype = _KeyboardEvent_prototype;\n\n\ttmp = new _KeyboardEvent( \"keyup\" );\n\n\ttry {\n\t\tdelete tmp[\"keyCode\"];\n\t\t_Object_defineProperty( tmp, \"keyCode\", { \"writable\": true, \"value\": 9 } );\n\t\tdelete tmp[\"which\"];\n\t\t_Object_defineProperty( tmp, \"which\", { \"writable\": true, \"value\": 9 } );\n\t}\n\tcatch(e){}\n\n\tcanOverwrite_which = tmp.which === 9;\n\n\tif( !(canOverwrite_keyCode = tmp.keyCode == 9) && _Event_prototype__native_keyCode_getter ) {\n\t\t_Object_defineProperty( _KeyboardEvent_prototype, \"keyCode\", {\n\t\t\t\"enumerable\": true,\n\t\t\t\"configurable\": true,\n\t\t\t\"get\": function() {\n\t\t\t\tif( \"__keyCode\" in this )return this[\"__keyCode\"];\n\n\t\t\t\treturn _Event_prototype__native_keyCode_getter.call( this );\n\t\t\t},\n\t\t\t\"set\": function( newValue ) {\n\t\t\t\treturn this[\"__keyCode\"] = isNaN( newValue ) ? 0 : newValue;\n\t\t\t}\n\t\t} );\n\t\t_Object_defineProperty( _KeyboardEvent_prototype, \"charCode\", {\n\t\t\t\"enumerable\": true,\n\t\t\t\"configurable\": true,\n\t\t\t\"get\": function() {\n\t\t\t\tif( \"__charCode\" in this )return this[\"__charCode\"];\n\n\t\t\t\treturn _Event_prototype__native_keyCode_getter.call( this );\n\t\t\t},\n\t\t\t\"set\": function( newValue ) {\n\t\t\t\treturn this[\"__charCode\"] = isNaN( newValue ) ? 0 : newValue;\n\t\t\t}\n\t\t} );\n\t}\n\telse {\n\t\t_Event_prototype__native_keyCode_getter = void 0;\n\n\t\t\t}\n\n\tif( __GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ ) {\n\t\t\t\tnewKeyboadrEvent_key_property_proposal__getKey_ = function( originalKey ) {\n\t\t\toriginalKey = originalKey || \"\";\n\t\t\tif( originalKey.length > 1 ) {//fast IS SPECIAL KEY\n\t\t\t\treturn originalKey;\n\t\t\t}\n\n\t\t\tvar eventKeyCode = this.which || this.keyCode;\n\n\t\t\tif( this.type == \"keypress\" ) {\n\t\t\t\n\t\t\t\n\n\t\t\t\teventKeyCode += _KEYPRESS_VK__CHARACTER_KEYS__DOWN_UP_DELTA;\n\t\t\t}\n\n\t\t\tvar vkCharacterKey = VK__CHARACTER_KEYS__DOWN_UP[eventKeyCode]\n\t\t\t\t, value_is_object = vkCharacterKey && typeof vkCharacterKey == \"object\"\n\t\t\t\t, _key = value_is_object ? vkCharacterKey._key : vkCharacterKey\n\t\t\t\t, _keyCode\n\t\t\t;\n\n\t\t\tif(_key)return _key;\n\n\t\t\t_keyCode = vkCharacterKey && vkCharacterKey._keyCode\n\t\t\t\t|| (eventKeyCode > 64 && eventKeyCode < 91 && eventKeyCode)//a-z\n\t\t\t;\n\n\t\t\treturn (_keyCode && String.fromCharCode( _keyCode ) || originalKey).toLowerCase()\n\t\t}\n\t}\n\n\tfunction _helper_isRight_keyIdentifier ( _keyIdentifier ) {\n\t\treturn _keyIdentifier && !(_keyIdentifier in VK__FAILED_KEYIDENTIFIER) && _keyIdentifier.substring( 0, 2 ) !== \"U+\";\n\t}\n\n\t_Object_defineProperty( _KeyboardEvent_prototype, \"key\", {\n\t\t\"enumerable\": true,\n\t\t\"configurable\": true,\n\t\t\"get\": function() {\n\t\t\tvar thisObj = this\n\t\t\t\t, value\n\t\t\t;\n\n\t\t\tif( _Event_prototype__native_key_getter ) {//IE9 & Opera\n\t\t\t\tvalue = _Event_prototype__native_key_getter.call( thisObj );\n\n\t\t\t\tif( value && value.length < 2 || _helper_isRight_keyIdentifier(value) ) {\n\t\t\t\t\tif( __GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ ) {\n\t\t\t\t\t\treturn newKeyboadrEvent_key_property_proposal__getKey_.call( this, value );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( \"__key\" in thisObj )return thisObj[\"__key\"];\n\n\t\t\tif( !(thisObj.type in KEYBOARD_EVENTS) )return;\n\n\t\t\tvar _keyCode = thisObj.which || thisObj.keyCode\n\t\t\t\t, notKeyPress = thisObj.type != \"keypress\"\n\t\t\t\t, value_is_object\n\t\t\t;\n\n\t\t\tif( notKeyPress ) {\n\t\t\t\tif( \"keyIdentifier\" in thisObj && _helper_isRight_keyIdentifier( thisObj[\"keyIdentifier\"] ) ) {\n\t\t\t\t\tvalue = thisObj[\"keyIdentifier\"];\n\t\t\t\t}\n\t\t\t\telse if( !__GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ || !notKeyPress || (value = VK__NON_CHARACTER_KEYS[_keyCode]) ) {\n\t\t\t\t\tvalue = value || VK__CHARACTER_KEYS__DOWN_UP[_keyCode];\n\t\t\t\t\tvalue_is_object = value && typeof value == \"object\";\n\t\t\t\t\tvalue =\n\t\t\t\t\t\t(value_is_object ? value._key : value) ||\n\t\t\t\t\t\t\tthisObj[\"char\"]//char getter\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue = newKeyboadrEvent_key_property_proposal__getKey_.call( this, value );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = thisObj[\"char\"];//char getter\n\t\t\t}\n\n\t\t\t__Property_descriptor__[\"value\"] = value;\n\t\t\t_Object_defineProperty(thisObj, \"__key\", __Property_descriptor__);\n\t\t\treturn value;\n\t\t}\n\t} );\n\t_Object_defineProperty( _KeyboardEvent_prototype, \"char\", {\n\t\t\"enumerable\": true,\n\t\t\"configurable\": true,\n\t\t\"get\": function() {\n\t\t\tvar thisObj = this;\n\n\t\t\tif( !(thisObj.type in KEYBOARD_EVENTS) )return;\n\n\t\t\tif( thisObj.ctrlKey\n\t\t\t\t|| thisObj.altKey\n\t\t\t\t|| thisObj.metaKey\n\t\t\t) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tif( \"__char\" in thisObj )return thisObj[\"__char\"];\n\n\t\t\tvar value\n\t\t\t\t, notKeyPress = thisObj.type != \"keypress\"\n\t\t\t\t, _keyCode = !notKeyPress && thisObj[\"__keyCode\"] || thisObj.which || thisObj.keyCode\n\t\t\t\t, value_is_object\n\t\t\t;\n\n\t\t\tif( notKeyPress && (value = VK__NON_CHARACTER_KEYS[_keyCode]) && !(typeof value == \"object\") ) {\n\t\t\t\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tif( _Event_prototype__native_char_getter && (value = _Event_prototype__native_char_getter.call( thisObj )) !== null ) {//IE9 & Opera\n\t\t\t\n\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = VK__CHARACTER_KEYS__DOWN_UP[_keyCode] || VK__NON_CHARACTER_KEYS[_keyCode];\n\t\t\t\tvalue_is_object = value && typeof value == \"object\";\n\n\t\t\t\tif( !value_is_object || value._char === false ) {\n\t\t\t\t\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t}\n\t\t\t\telse if( value_is_object && value._char !== void 0 ) {\n\t\t\t\t\tvalue = value._char || \"\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif( \"keyIdentifier\" in thisObj && _helper_isRight_keyIdentifier( thisObj[\"keyIdentifier\"] ) ) {//webkit\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = String.fromCharCode( _keyCode );\n\t\t\t\t\t\tif( notKeyPress && !thisObj.shiftKey ) {\n\t\t\t\t\t\t\tvalue = value.toLowerCase();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t__Property_descriptor__[\"value\"] = value;\n\t\t\t_Object_defineProperty(thisObj, \"__char\", __Property_descriptor__);\n\t\t\treturn value;\n\t\t}\n\t} );\n\t_getter_KeyboardEvent_location = function() {\n\t\tvar thisObj = this;\n\n\t\tif( _Event_prototype__native_location_getter ) {//IE9\n\t\t\treturn _Event_prototype__native_location_getter.call( this );\n\t\t}\n\n\t\tif( \"__location\" in thisObj )return thisObj[\"__location\"];\n\n\t\tif( !(thisObj.type in KEYBOARD_EVENTS) )return;\n\n\t\tvar _keyCode = thisObj.which || thisObj.keyCode\n\t\t\t, notKeyPress = thisObj.type != \"keypress\"\n\t\t\t, value\n\t\t;\n\n\t\t\t\tif( \"keyLocation\" in thisObj ) {//webkit\n\t\t\tvalue = thisObj[\"keyLocation\"];\n\t\t}\n\t\telse {\n\t\t\tvalue = notKeyPress && (VK__NON_CHARACTER_KEYS[_keyCode] || VK__CHARACTER_KEYS__DOWN_UP[_keyCode]);\n\t\t\tvalue = typeof value == \"object\" && value._location || _DOM_KEY_LOCATION_STANDARD;\n\t\t}\n\n\t\t__Property_descriptor__[\"value\"] = value;\n\t\t_Object_defineProperty(thisObj, \"__location\", __Property_descriptor__);\n\t\treturn value;\n\t};\n\t_Object_defineProperty( _KeyboardEvent_prototype, \"location\", {\n\t\t\"enumerable\": true,\n\t\t\"configurable\": true,\n\t\t\"get\": _getter_KeyboardEvent_location\n\t} );\n\n\tfunction _keyDownHandler ( e ) {\n\t\tvar _keyCode = e.which || e.keyCode\n\t\t\t, thisObj = this._this\n\t\t\t, listener\n\t\t\t, _\n\t\t\t, vkNonCharacter\n\t\t\n\t\t\n\t\t\n\t\t;\n\n\t\t\t\tif(\n\t\t\te.ctrlKey || e.altKey || e.metaKey//Special events\n\t\t\t|| ((vkNonCharacter = VK__NON_CHARACTER_KEYS[_keyCode]) && vkNonCharacter._key !== 0)\n\t\t\t|| e[\"__key\"] || e.isTrusted === false\n\t\t) {\n\t\t\tlistener = this._listener;\n\n\t\t\tif( typeof listener === \"object\" ) {\n\t\t\t\tif( \"handleEvent\" in listener ) {\n\t\t\t\t\tthisObj = listener;\n\t\t\t\t\tlistener = listener.handleEvent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( listener && listener.apply ) {\n\t\t\t\tlistener.apply( thisObj, arguments );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t_ = thisObj[\"_\"] || (thisObj[\"_\"] = {});\n\t\t\t_[_shim_event_keyCodeUUID] = _keyCode;\n\n\t\t\n\t\t\tif( \"keyLocation\" in e ) {//TODO:: tests\n\t\t\t\t_[\"_keyLocation\"] = e.keyLocation;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _keyDown_via_keyPress_Handler ( e ) {\n\t\tvar _keyCode\n\t\t\t, _charCode = e.which || e.keyCode\n\t\t\t, thisObj = this\n\t\t\t, _ = thisObj[\"_\"]\n\t\t\t, _event\n\t\t\t, need__stopImmediatePropagation__and__preventDefault\n\t\t\t, vkCharacterKey\n\t\t\t, __key\n\t\t;\n\n\t\tif( e[\"__stopNow\"] )return;\n\n\t\tif( _ && _shim_event_keyCodeUUID in _ ) {\n\t\t\t_keyCode = _[_shim_event_keyCodeUUID];\n\t\t\tdelete _[_shim_event_keyCodeUUID];\n\n\t\t\te[\"__keyCode\"] = _keyCode;//save keyCode from 'keydown' and 'keyup' for 'keypress'\n\n\t\t\tif( vkCharacterKey = VK__CHARACTER_KEYS__DOWN_UP[_keyCode]) {\n\t\t\t\tif( IS_NEED_KEYCODE_BUGFIX && vkCharacterKey._keyCode ) {\n\t\t\t\t\t_keyCode = vkCharacterKey._keyCode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\n\t\t\tif( \"keyLocation\" in e && \"_keyLocation\" in _ ) {//webkit//TODO:: tests\n\t\t\t\tdelete e.keyLocation;\n\t\t\t\te.keyLocation = _[\"_keyLocation\"];\n\t\t\t}\n\n\t\t\tif( __GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ ) {\n\t\t\t\tif( _keyCode < 91 && _keyCode > 64 && _charCode != _keyCode && (!VK__CHARACTER_KEYS__DOWN_UP[_keyCode]) ) {\n\t\t\t\t\tvkCharacterKey = vkCharacterKey || (VK__CHARACTER_KEYS__DOWN_UP[_keyCode] = {});\n\t\t\t\t\tvkCharacterKey._keyCode = _keyCode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t__key = vkCharacterKey && vkCharacterKey._key || (String.fromCharCode(_keyCode)).toLowerCase();\n\n\t\t\te[\"__key\"] = __key;\n\t\t\te[\"__char\"] = String.fromCharCode(_charCode);\n\n\t\t\t_event = new global[\"KeyboardEvent\"]( \"keydown\", e );\n\n\t\t\tdelete _event[\"keyLocation\"];//webkit\n\t\t\tdelete _event[\"__location\"];\n\n\t\t\tif( canOverwrite_which ) {//Not Safari\n\t\t\t\tdelete _event[\"which\"];\n\t\t\t\t_Object_defineProperty( _event, \"which\", {\"value\": _keyCode} );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_event[\"__which\"] = _keyCode;\n\t\t\t}\n\t\t\tif( canOverwrite_keyCode ) {//Not IE9 | Not Safari\n\t\t\t\tdelete _event[\"keyCode\"];\n\t\t\t\t_Object_defineProperty( _event, \"keyCode\", {\"value\": _keyCode} );\n\t\t\t}\n\t\t\t_event[\"__location\"] = _getter_KeyboardEvent_location.call( _event );\n\n\t\t\tif( !_Event_prototype__native_key_getter ) {//Not IE9 & Opera 12\n\t\t\t\tvkCharacterKey = vkCharacterKey || (vkCharacterKey = VK__CHARACTER_KEYS__DOWN_UP[_charCode] = VK__CHARACTER_KEYS__DOWN_UP[_keyCode] = {});\n\n\t\t\t\tvkCharacterKey._char = _event[\"char\"];\n\n\t\t\t\tif( !__GCC__NEW_KEYBOARD_EVENTS_PROPOSAL__ ) {\n\t\t\t\t\tvkCharacterKey._key = vkCharacterKey._char;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tneed__stopImmediatePropagation__and__preventDefault = !(e.target || thisObj).dispatchEvent( _event );\n\t\t\n\t\t}\n\t\telse {\n\t\t\n\t\t\tneed__stopImmediatePropagation__and__preventDefault = (\n\t\t\t\t!e.ctrlKey &&\n\t\t\t\t\t(_ = VK__CHARACTER_KEYS__DOWN_UP[_charCode]) && (typeof _ == \"object\" ? _._key || \"\" : _).length > 1\n\t\t\t\t) ?\n\t\t\t\t2//Only stopImmediatePropagation\n\t\t\t\t:\n\t\t\t\t0//Nothing\n\t\t\t;\n\t\t}\n\n\t\tif( need__stopImmediatePropagation__and__preventDefault ) {\n\t\t\tif( need__stopImmediatePropagation__and__preventDefault === true ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tif( _Event_has_stopImmediatePropagation ) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t}\n\t\t\telse {\n\t\t\t\te[\"__stopNow\"] = true;\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t}\n\n\t\tif( !_Event_prototype__native_char_getter ) {\n\t\t[\n\t\t\t(tmp = global[\"Document\"]) && tmp.prototype || global[\"document\"],\n\t\t\t(tmp = global[\"HTMLDocument\"]) && tmp.prototype,\n\t\t\t(tmp = global[\"Window\"]) && tmp.prototype || global,\n\t\t\t(tmp = global[\"Node\"]) && tmp.prototype,\n\t\t\t(tmp = global[\"Element\"]) && tmp.prototype\n\t\t].forEach( function( prototypeToFix ) {\n\t\t\t\tif(!prototypeToFix || !_hasOwnProperty(prototypeToFix, \"addEventListener\"))return;\n\t\t\t\t\n\t\t\t\tvar old_addEventListener = prototypeToFix.addEventListener\n\t\t\t\t\t, old_removeEventListener = prototypeToFix.removeEventListener\n\t\t\t\t;\n\n\t\t\t\tif( old_addEventListener ) {\t\t\t\t\t\n\t\t\t\t\tprototypeToFix.addEventListener = function( type, listener, useCapture ) {\n\t\t\t\t\t\tvar thisObj = this\n\t\t\t\t\t\t\t, _\n\t\t\t\t\t\t\t, _eventsUUID\n\t\t\t\t\t\t\t, _event_UUID\n\t\t\t\t\t\t\t, _events_countUUID\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tif( (type + \"\").toLowerCase() === \"keydown\" ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t_eventsUUID = _event_eventsUUID + (useCapture ? \"-\" : \"\") + type;\n\t\t\t\t\t\t\t_event_UUID = _eventsUUID + (listener[_event_handleUUID] || (listener[_event_handleUUID] = ++UUID));\n\t\t\t\t\t\t\t_events_countUUID = _eventsUUID + \"__count\";\n\n\t\t\t\t\t\t\tif( !(_ = this[\"_\"]) )_ = this[\"_\"] = {};\n\n\t\t\t\t\t\t\tif( _event_UUID in _ )return;\n\n\t\t\t\t\t\t\tif( _[_events_countUUID] === void 0 ) {\n\t\t\t\t\t\t\t\told_addEventListener.call( thisObj, \"keypress\", _keyDown_via_keyPress_Handler, true );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_[_events_countUUID] = (_[_events_countUUID] || 0) + 1;\n\n\t\t\t\t\t\t\targuments[1] = _[_event_UUID] = _unSafeBind.call( _keyDownHandler, {_listener: listener, _this: this} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn old_addEventListener.apply( thisObj, arguments );\n\t\t\t\t\t};\n\n\t\t\t\t\tif( old_removeEventListener )prototypeToFix.removeEventListener = function( type, listener, useCapture ) {\n\t\t\t\t\t\tvar thisObj = this\n\t\t\t\t\t\t\t, _\n\t\t\t\t\t\t\t, _eventsUUID\n\t\t\t\t\t\t\t, _event_UUID\n\t\t\t\t\t\t\t, _events_countUUID\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tif( (type + \"\").toLowerCase() === \"keydown\" ) {\n\t\t\t\t\t\t\t_eventsUUID = _event_eventsUUID + (useCapture ? \"-\" : \"\") + type;\n\t\t\t\t\t\t\t_event_UUID = _eventsUUID + listener[_event_handleUUID];\n\t\t\t\t\t\t\t_events_countUUID = _eventsUUID + \"__count\";\n\t\t\t\t\t\t\t_ = thisObj[\"_\"];\n\n\t\t\t\t\t\t\tif( _event_UUID && _ && _[_events_countUUID] ) {\n\t\t\t\t\t\t\t\t--_[_events_countUUID];\n\n\t\t\t\t\t\t\t\tif( arguments[1] = _[_event_UUID] ) {\n\t\t\t\t\t\t\t\t\tdelete _[_event_UUID];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn old_removeEventListener.apply( thisObj, arguments );\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\t\n\t}\n\telse {\n\t\tdocument.addEventListener(\"keydown\", function(e) {\n\t\t\tvar _char = (_Event_prototype__native_char_getter ? _Event_prototype__native_char_getter.call(e) : e[\"char\"])\n\t\t\t\t, _charCode = _char && _char.charCodeAt(0)\n\t\t\t\t, _keyCode\n\t\t\t\t, vkCharacter\n\t\t\t\t, vkCharacter_key\n\t\t\t;\n\t\t\tif( _charCode && !(VK__CHARACTER_KEYS__DOWN_UP[_charCode += _KEYPRESS_VK__CHARACTER_KEYS__DOWN_UP_DELTA]) ) {\n\t\t\t\tvkCharacter = VK__CHARACTER_KEYS__DOWN_UP[_charCode] = {};\n\t\t\t\t_keyCode = e.keyCode;\n\t\t\t\tif( vkCharacter_key = VK__CHARACTER_KEYS__DOWN_UP[_keyCode] ) {\n\t\t\t\t\t_char = typeof vkCharacter_key == \"object\" && vkCharacter_key._key || vkCharacter_key;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t_char = String.fromCharCode(_keyCode);\n\t\t\t\t}\n\t\t\t\tif(_keyCode > 64 && _keyCode < 91 && _keyCode) {//a-z\n\t\t\t\t\t_char = _char.toLowerCase();\n\t\t\t\t}\n\t\t\t\tvkCharacter._key = _char;\n\t\t\t}\n\t\t}, true);\n\t}\n\n\n\n\tglobal[\"KeyboardEvent\"] = _KeyboardEvent;\n\n\n\t_DOM_KEY_LOCATION_LEFT = _DOM_KEY_LOCATION_RIGHT = _DOM_KEY_LOCATION_NUMPAD = _DOM_KEY_LOCATION_MOBILE = _DOM_KEY_LOCATION_JOYSTICK =\n\t\t_Object_getOwnPropertyDescriptor = getObjectPropertyGetter = tmp = testKeyboardEvent = _KeyboardEvent = _KeyboardEvent_prototype = __i =\n\t\t\t_Event_prototype = _userAgent_ = _BROWSER = _IS_MAC = null;\n}.call( window );\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/DOMEventsLevel3.shim.js"],"sourceRoot":""}